<!DOCTYPE html>
<!-- saved from url=(0041)http://v2.bootcss.com/examples/fluid.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>Vesion</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
    <!-- Le styles -->
    <link href="{{ static_url('css/bootstrap.css') }}" rel="stylesheet">
    <link rel="stylesheet" href="{{ static_url('css/style.css')}}">
    <link rel="stylesheet" href="{{ static_url('css/docs.min.css')}}">
    <link href="{{ static_url('css/bootstrap-responsive.css') }}" rel="stylesheet">
    <link rel="stylesheet" href="{{ static_url('css/bootstrap.icon-large.min.css')}}">
    
    <link rel="stylesheet" href="{{ static_url('css/vesion.css')}}">
    <link rel="stylesheet" href="{{ static_url('css/cytoscape-context-menus.css')}}">
    <link rel="stylesheet" href="{{ static_url('css/spectrum.css') }}">
    <link rel="stylesheet" href="{{ static_url('css/flat-ui.css')}}">
    <link rel="stylesheet" href="{{ static_url('css/slider.css')}}">
    <link rel="stylesheet" type="text/css" href="{{ static_url('css/jquery.qtip.min.css')}}">
    <link rel="stylesheet" type="text/css" href="{{ static_url('css/cytoscape.js-panzoom.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ static_url('css/font-awesome.css') }}">
    <link href="{{ static_url('css/iziModal.min.css')}}" rel="stylesheet" >
    <script src="{{ static_url('js/plotly-latest.min.js')}}"></script>
    <script src="{{ static_url('js/jquery.js')}}"></script>
    <script src="{{ static_url('js/bootstrap.min.js')}}"></script>
    <script src="{{ static_url('js/cytoscape.min.js')}}"></script>
    <script src="{{ static_url('js/cy-spread.js') }}"></script>
    <script src="{{ static_url('js/download.js')}}"></script>
    <script src="{{ static_url('js/cytoscape-context-menus.js')}}"></script>
    <script src="{{ static_url('js/spectrum.js') }}"></script>
    <script src="{{ static_url('js/bootstrap-slider.js')}}"></script>
    <script src="{{ static_url('js/site.js')}}"></script>
    <script src="{{ static_url('js/juqery.qtip.min.js')}}"></script>
    <script src="{{ static_url('js/qtip.js')}}"></script>
    <script src="{{ static_url('js/cytoscape-panzoom.js') }}"></script>
    <script type="text/javascript" src="{{ static_url('js/dagre.js') }}"></script>
    <script type="text/javascript" src="{{ static_url('js/cytoscape-dagre.js') }}"></script>
    <script type="text/javascript" src="{{ static_url('js/cytoscape-navigator.js') }}"></script>
    <script src="{{ static_url('js/iziModal.min.js')}}"></script>
    <style> 
      #cy {
        width: 100%;
        height: 100%;
        left: 0;
        top: 0;
        z-index: 999;
      }
      .td {
        text-align: right;
      }
      #ex1Slider .slider-selection {
        background: #BABABA;
      }
      .edge_btn {
        width: 100%;
        height: 100%;
        display: inline-table;
        padding: 6px;
        color: white;
      }
    </style>
  </head>
  <body style="padding-top:0px">

    <div class="navbar navbar-inverse navbar-fixed-top" style="position: static" >
      <div class="navbar-inner">
        <div class="container-fluid">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="/">BioPA</a>
          <div class="nav-collapse collapse">
            <p class="navbar-text pull-right">
              Logged in as <a href="" class="navbar-link">Username</a>
            </p>
            <ul class="nav">
              <li class="active"><a href="/">Home</a></li>
              <li><a href="about">About</a></li>
              <li><a href="contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row">
          <div class="span4 hero-unit bs-example bs-example-tabs">
            <ul id="myTab" class="nav nav-tabs">
              <li class="active">
                <a href="#home" data-toggle="tab">
                   Node
                  <h2 id="net" style="display: none"> {{ hello }}</h2>
                </a>
              </li>
              <li><a href="#ios" data-toggle="tab">Edge</a></li>
              <li><a href="#jmeter" tabindex="-1" data-toggle="tab">Style</a></li>
            </ul>
            <div id="myTabContent" class="tab-content">
              <div class="tab-pane fade in active" id="home" style="overflow: hidden; border-top: 0px">
                <div id="Detail-tips"">
                  <p id="help-text" class="help-text palette palette-silver">Click on the node or edge on in the network to see more info</p>
                  <img id="arrow" src="{{ static_url('img/turn-right.png')}}">
                </div><!--Detail-tips-->
                <div id="Detail-table" class="table table-bordered table-striped table-responsive table-condensed table-hover" style="display: none; " aria-labelledby="li-detail">
                  <table style="border: 0">
                    <tbody>
                      <tr>
                        <td colspan="2" ><h5 id="gene-title">Gene Name</h5></td>
                      </tr>
                      <tr>
                        <th class="span6">UniProtID</th>
                        <td id="UniProtID" class="span6"><a href="">null</a></td>
                      </tr>
                      <tr>
                        <th>HGNC</th>
                        <td id="HGNC">3233</td>
                      </tr>
                      <tr>
                        <th>OMIM</th>
                        <td id="OMIM">604267 </td>
                      </tr>
                      <tr>
                        <th>UniProtKB</th>
                        <td id="Protein">Q7Z7M0</td>
                      </tr>
                      <tr>
                        <th>Ensembl</th>
                        <td id="cDNA">ENSG00000105429</td>
                      </tr>
                      <tr>
                        <th>Entrez Gene</th>
                        <td id="Atlas">1954</td>
                      </tr>
                    </tbody>
                  </table>
                </div><!--Deatil-table-->
              </div><!--first tab-->
              <div class="tab-pane fade" id="ios" style="overflow: hidden; border-top: 0px">
                <div id="edge-type" class="table table-bordered table-striped table-responsive table-condensed table-hover">
                  <table >
                    <tbody>
                      <tr>
                        <th colspan="3" class="span12"><h4>Edge Types</h4></th>
                      </tr>
                      {% for edge_name in edge_types %}
                          <tr>
                            <td class="span2" id="{{ edge_name }}-num"></td>
                            <th class="span9">
                              <button class="edge_btn" id="{{ edge_name }}-btn">{{ edge_name }}</button>
                            </th>
                            <td class="span1">
                              <a class="icon-remove" value="{{ edge_name }}"></a>
                              <a class="icon-plus" value="{{ edge_name }}"></a>
                            </td>
                          </tr>
                      {% end %}                 
                    </tbody>
                  </table>
                </div><!---edge Type-->
              </div>
              <div class="tab-pane fade" id="jmeter" style="overflow: hidden; border-top: 0px">
                <div id="color-picker" class="table table-striped table-condensed table-striped table-responsive table-hover" style="height: 500px">
                  <table id = 'node-style'>
                    <tbody>
                      <tr>
                        <td colspan="4"><h5>Node style</h5></td>
                      </tr>
                      <tr>
                        <th class="span2" style="line-height: 50px">Shape</th>
                        <td class="span3" style="line-height: 50px">
                          <img src="{{ static_url('img/ellipse.png')}}" id="imgShape">
                        </td>
                        <td class="span3" style="line-height: 50px" id="shapeText">Ellipse</td>
                        <td class="span4"><!-- Single button -->
                          <!-- Inverted skin  -->
                            <div class="btn-group"">
                              <button class="btn " type="button" data-toggle="dropdown" style="background-color: '#f9f9f9'">
                                <span class="icon-cog"></span>
                              </button>
                              <ul class="dropdown-menu " role="menu" id="Shape">
                                <li><a href="#"  value="ellipse">Ellipse</a></li>
                                <li><a href="#"  value="rectangle">Rectangle</a></li>
                                <li><a href="#"  value="triangle">Triangle</a></li>
                                <li><a href="#"  value="pentagon">Pentagon</a></li>
                                <li><a href="#"  value="hexgon">Hexgon</a></li>
                                <li><a href="#"  value="heptagon">Heptagon</a></li>
                                <li><a href="#"  value="octagon">Octagon</a></li>
                                <li><a href="#"  value="star">Star</a></li></li>
                                <li><a href="#"  value= "diamond">Diamond</a></li>
                                <li><a href="#"  value="vee">Vee</a></li>
                                <li><a href="#"  value="rhomboid">Rhomboid</a></li>
                              </ul>
                            </div>
                        </td>
                      </tr>
                      <tr>
                        <th style="line-height: 50px">Color</th>
                        <td>
                          <div style="background-color: black;color: black; height: 48px"  id="colorBoard"> hllow</div>
                        </td>
                        <td style="line-height: 50px" id="colorCode">
                          #000000
                        </td>
                        <td>
                          <div class="btn-group" ">
                            <a href="" class="btn .btn-default icon-pencil" id="full"><span class="icon-pencil"></span></a>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <th>Size</th>
                        <td colspan="3">
                         <input id="ex1" data-slider-id='ex1Slider' type="text" data-slider-min="20" data-slider-max="100" data-slider-step="1" data-slider-value="30"/>
                        </td>
                      </tr>
                      <tr>
                        <th colspan="4"><h5>Edge Style</h5></th>
                      </tr>
                      <tr >
                        <th style="line-height: 50px">Style</th>
                        <td style="line-height: 50px">
                          <img src=" {{ static_url('img/solid.png') }}" id="imgLine">
                        </td>
                        <td style="line-height: 50px" id="lineText">Solid</td>
                        <td>
                            <div class="btn-group"">
                              <button class="btn " type="button" data-toggle="dropdown" style="background-color: '#f9f9f9'">
                                <span class="icon-cog"></span>
                              </button>
                              <ul class="dropdown-menu " role="menu" id="lineStyle">
                                <li><a href="#"  value="solid">Solid</a></li>
                                <li><a href="#"  value="dotted">Dotted</a></li>
                                <li><a href="#"  value="dashed">Dashed</a></li>
                              </ul>
                            </div>
                        </td>
                      </tr>
                      <tr>
                        <th style="line-height: 50px">Color</th>
                        <td style="line-height: 50px">
                          <div style="background-color: black;color: black; height: 48px"  id="lineColorBoard"> hllow</div>
                        </td>
                        <td style="line-height: 50px" id="lineColorCode">#000000</td>
                        <td>
                          <div class="btn-group" ">
                            <a href="" class="btn .btn-default icon-pencil" id="full2"><span class="icon-pencil"></span></a>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <th style="line-height: 50px">Size</th>
                        <td colspan="3">
                            <input id="ex2" data-slider-id='ex1Slider' type="text" data-slider-min="1" data-slider-max="20" data-slider-step="1" data-slider-value="4"/>
                        </td>
                      </tr>
                    </tbody>              
                  </table>
                </div><!--#color-picker-->
              </div>
            </div><!--tab content-->
          </div><!--span4-->
          <div class="hero-unit span8" style="padding: 10px">
            <div class="btn-toolbar" role="toolbar">
            <div class="btn-group">
              <button class="btn btn-default" id ="btn-zoom-in" ><a title="Zoom in" class="icon-zoom-in icon-large"></a></button>
              <button class="btn btn-default" id ="btn-zoom-out"><a 
              title="Zoom Out" class ="icon-zoom-out icon-large"></a></button>
              <button class="btn btn-default" id ="btn-save" ><a title="Save" class="icon-camera icon-large"></a></button> 
              <button class="btn btn-default" id="btn-showall"><a title="Showall" class="icon-eye-open icon-large"></a></button>
              <button class="btn btn-default" id ="btn-hide-node" ><a class="icon-eye-close icon-large"></a></button>
              <button class="btn btn-default" id ="btn-screen-fit"><a class="icon-repeat icon-large"></a></button>
              <button class="btn btn-default" id = "btn-screen-full"><a class="icon-resize-full icon-large"></a></button>
              <div class="btn-group">
                <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                  <i class="icon-list icon-large"></i>
                </button>
                <ul class="dropdown-menu" id='Menu'>
                  <li><a id="Random"       value="random">Random</a></li>
                  <li><a id="Grid"         value="grid">Grid</a></li>
                  <li><a id="Circle"       value="circle">Circle</a></li>
                  <li><a id="Concentic"    value="concentric">Concentic</a></li>
                  <li><a id="BreadthFirst" value="breadthfirst">Breadth First</a></li>
                  <li><a id="Cose"         value="cose">Cose</a></li>
                  <li><a id="Preset"       value="spread">Preset</a></li>
                  <li><a id="Dagre"        value="dagre">Dagre</a>
                </ul>
              </div><!--btn-group-->
            </div>                    
            </div><!--.btn-toolbar-->
            <div id="cy" style="height: 450px; overflow: auto;overflow-x:auto"><p></p></div> 
          </div><!--.span8-->
      </div><!--row-->
      <div id="modal" class="iziModal isFullscreen">
        <div class="iziModal-header iziModal-noSubtitle" style="background: rgb(136, 160, 185);padding-right: 70px">
          <h2 class="iziModal-header-title">Fullscreen of network</h2>
          <div class="iziModal-header-buttons">
            <button class="iziModal-button iziModal-button-close" data-izimodal-close="" data-izimodal-transitionout="bounceOutDown" id="close-btn"></button>
          </div>
        </div>
        <div class="iziModal-wrap">
          <div class="iziModal-content" id="cy2" style="height: 600px;">
          </div>
        </div>
      </div>
      <hr> 
      <footer>
        <p>© Harbin Institute of Technology 2017</p>
      </footer>
    </div><!--/.fluid-container-->
    <script type="text/javascript">
      /*
      Define the global variables
      */
      var cy = new Object();
      var clickMenu = new Object();
      var nodeColor = '#000000';
      var tableDetail = new Object();
      var opt = new Object();
    </script>
    <script>
    $(function() {
      $.ajaxSetup({async:false});
      $.getJSON("http://localhost:8000/static/json/versionOption.json",function(data){ 
          opt  = data;
      });

      net = JSON.parse($('#net').text());
      cy = cytoscape({
        container: document.getElementById('cy'), 
        boxSelectionEnabled: true,
        //autounselectify: true,
        layout: {
            name: 'spread',
          }, 
          
          style: [
            {
              selector: 'node',
              style: {
                'font-size': 4,
                'background-color': '#96d9f6',//#96d9f6
                'size': 20,
                //'content': 'data(id)',
                "text-valign": "center",
                "text-halign": "center",
                "width": "mapData(score, 0, 0.006769776522008331, 20, 60)",
                "height": "mapData(score, 0, 0.006769776522008331, 20, 60)",
                "text-outline-color": "#555",
                "text-outline-width": "2px",
                "color": "#fff",
                "overlay-padding": "6px",
                "z-index": "10"
              }
            },

            {
              selector: "edge",
              style : {
                'curve-style': 'haystack',
                'haystack-radius': 0.5,
                'opacity': 0.4,
                'line-color': "#bbb",
                'width': "mapData(weight, 0, 1, 1, 8)",
                'overlay-padding': "3px"
              }
            },
            {
              selector:  "edge[type = 'CAI']",
              style: {
                'line-color': '#8840A7'
              }
            },
           
            {
              selector:  "edge[type = 'BRR']",
              style: {
                'line-color': '#1139AA'
              }
            },

            {
              selector:  "edge[type = 'MI']",
              style: {
                'line-color': '#1DC600'
              }
            },

            {
              selector:  "edge[type = 'TBRR']",
              style: {
                'line-color': '#20C3C9'
              }
            },

            {
              selector:  "edge[type = 'ER']",
              style: {
                'line-color': '#C8AA64'
              }
            },
            {
              selector: ':selected',
              style: {
                'background-color': '#000000',
                'line-color': 'black',
                'target-arrow-color': 'black',
                'source-arrow-color': 'black',
                'opacity': 3
              }
            }
          ], 
    
          elements: net,        
        });//cy 
         
        // cy panzoom plugin 
        cy.panzoom({});

        cy.on('tap', function(event){
          var evtTarget = event.cyTarget;
          $('#Detail').addClass('active in');
          if( evtTarget === cy ){
              cy.trigger('boxstart');
          } else {
  
            if (event.cyTarget.isNode()) {
              var node = event.cyTarget;
              nodeIndex = '#' + node.id();
              cy.zoom(2);
              cy.center(nodeIndex);
              $('#li-detail').addClass('active');
              $('#li-setting').removeClass('active');
              $('#li-content').removeClass('active');
              $('#myTab a:first').tab('show');
              $('#Detail-table').show();
              $('Detail-tips').hide();
              $('#arrow').hide();
              $('#help-text').hide();
              $('#gene-title').text(node.id());
              $("tr#"+node.id()).show();
              $('#UniProtID a').text(node.id());
            }//end of event.cyTarget.isNode()

            if (event.cyTarget.isEdge) {
              console.log('Change the Edge tab!');
            }
          }//end-else
        });//end-cy.on

        cy.on('mouseover', 'node', function(event) {
          var node = event.cyTarget;
          nodeIndex = '<p>%s</p>'.format(node.id());

          node.qtip({
            content: nodeIndex,
            
            show: {
              event: event.type,
              ready: true
            },

            hide: {
              event: 'mouseout unfocus'
            },

            style: {
              classes: 'qtip-bootstrap',
              tip: {
                width: 16,
                height: 8
              }
            }

          }, event);
        });
      })
    </script>
    <script type="text/javascript">
      $(function() {
        $('#modal').iziModal({
          onClosed: function(modal) {
            $('.cy-panzoom').show();
          }
        });
      })
    </script>
   <!-- <script src="{{ static_url('js/heatmap.js')}}"></script>-->
    <script>
      $(function(){
        {% for edge_name in edge_types %}
          var edge_name = "{{ edge_name }}";
          var edge_color = "{{ edge_types[edge_name] }}";
          var edge = cy.filter("edge[type = \'" + edge_name + "\']");
          $('#' + edge_name + '-num').text(edge.length);
          $('#' + edge_name + '-btn').css('background-color', edge_color);
        {% end %}
        $('#ex1').slider({
           formatter: function(value) {
             return 'Current value: ' + value;
           }
        });
        $('#ex2').slider({
           formatter: function(value) {
             return 'Current value: ' + value;
           }
        });  
      });
    </script>
    <script>
      function selectAllOfTheSameType(ele) {
        cy.elements().unselect();
        if(ele.isNode()) {
            cy.nodes().select();
        }
        else if(ele.isEdge()) {
            cy.edges().select();
        }
      }
    </script>
    <script>
      $(function() {
        cy.contextMenus({
          menuItems: [
              {
                  id: 'remove',
                  title: 'remove',
                  selector: 'node, edge',
                  onClickFunction: function (event) {
                    event.cyTarget.remove();
                  },
                  hasTrailingDivider: true
                },
                {
                  id: 'hide',
                  title: 'hide',
                  selector: '*',
                  onClickFunction: function (event) {
                    event.cyTarget.hide();
                  },
                  disabled: false
                },
                {
                  id: 'add-node',
                  title: 'add node',
                  coreAsWell: true,
                  onClickFunction: function (event) {
                    var data = {
                        group: 'nodes'
                    };
                    
                    cy.add({
                        data: data,
                        position: {
                            x: event.cyPosition.x,
                            y: event.cyPosition.y
                        }
                    });
                  }
                },
                {
                  id: 'remove-selected',
                  title: 'remove selected',
                  coreAsWell: true,
                  onClickFunction: function (event) {
                    cy.$(':selected').remove();
                  }
                },
                {
                  id: 'select-all-nodes',
                  title: 'select all nodes',
                  selector: 'node',
                  onClickFunction: function (event) {
                    selectAllOfTheSameType(event.cyTarget);
                  }
                },
                {
                  id: 'select-all-edges',
                  title: 'select all edges',
                  selector: 'edge',
                  onClickFunction: function (event) {
                    selectAllOfTheSameType(event.cyTarget);
                  }
                },
                {
                  id: 'link kegg',
                  title: 'KEGG Link',
                  selector: 'node',
                  onClickFunction: function (event) {
                    var evtTarget = event.cyTarget;
                    if (evtTarget.id() != 'undefined') {
                      linkUrl = "http://www.kegg.jp/dbget-bin/www_bfind_sub?mode=bfind&max_hit=1000&dbkey=kegg&keywords=" + evtTarget.id();
                      window.open(linkUrl);
                    }
                  }
                },
                {
                  id: 'link common Pathway',
                  title: 'Pathway common DB Link',
                  selector: 'node',
                  onClickFunction: function (event) {
                    var evtTarget = event.cyTarget;
                    if (evtTarget.id() != 'undefined') {
                      linkUrl = "http://www.pathwaycommons.org/pc/webservice.do?version=3.0&snapshot_id=GLOBAL_FILTER_SETTINGS&record_type=PATHWAY&q="+evtTarget.id()+"&format=html&cmd=get_by_keyword"
                      window.open(linkUrl);
                    }
                  }
                },
                {
                  id: 'link reactome',
                  title: 'Reactome DB link',
                  selector: 'node',
                  onClickFunction: function (event) {
                    var evtTarget = event.cyTarget;
                    if (evtTarget.id() != 'undefined') {
                      linkUrl = "http://www.reactome.org/content/query?q="+event.cyTarget+"&species=Homo+sapiens&species=Entries+without+species&cluster=true"
                      window.open(linkUrl);
                    }
                  }
                },
                {
                  id: 'link wikipathways',
                  title: 'Wikipathways DB link',
                  selector: 'node',
                  onClickFunction: function (event) {
                    var evtTarget = event.cyTarget;
                    if (evtTarget.id() != 'undefined') {
                      linkUrl = "http://www.wikipathways.org//index.php?query="+event.cyTarget+"&title=Special%3ASearchPathways&doSearch=1&sa=Search"
                      window.open(linkUrl);
                    }
                  }
                },
              ],
              menuItemClasses: ['custom-menu-item'],
              contextMenuClasses: ['custom-context-menu']
          });//end-menu
      });
    </script>
    <script>
      $('#btn-screen-fit').click(function() {
        cy.fit();
      });
    </script>
    <script>
      $('#btn-save').click(function() {
        var png64 = cy.png({
          bg : "#ffffff"
        });
        download(png64, 'net.png', 'image/png');
      });
    </script>
    <script>
      $('#btn-zoom-in').click(function () {
       var zoom =  cy.zoom()
        zoom = zoom  + 0.05;
        if ( zoom > 9 ){
          zoom = 9;
        }
        cy.zoom({
          level: zoom
        });
      });
    </script>
    <script>
      $('#btn-zoom-out').click(function () {
        var zoom = cy.zoom();
        zoom = zoom - 0.05;
        if( zoom < cy.minZoom()){
          zoom = 0.05;
        }
        cy.zoom({
          level: zoom
        });
      });
    </script>
    <script>
      $('#Menu li a').click(function(){
        var layoutName = $(this).attr('value');
        var layout = cy.makeLayout({
          name : layoutName
        });
        layout.run();
      });
    </script>
    <script>
      $('#leftControlMenu li a').click(function(e) {
        $('#help-text').hide();
        $('help-text').css('margin-top: 0px');
        $('#arrow').hide();
        $('#Deatil-table').show();
        e.preventDefault();
        $(this).tab('show');
      })
    </script>
    <script>
      $("#btn-hide-node").click(function(){
        cy.$(':selected').hide();

      })
      $('#btn-showall').click(function() {
        cy.$('node').show();
        cy.$('edge').show();
      })
    </script>
    <script>
      $('a.icon-remove').click(function() {
        var edgeType = $(this).attr('value');
        $('tr#' + edgeType).remove();
        var filter  = "edge[type = \'" + edgeType + "\']";
        var selector = cy.filter(filter);
        selector.hide();
      });
    </script>
    <script>
      $('a.icon-plus').click(function() {
        var edgeType = $(this).attr('value');
        $('tr#' + edgeType).remove();
        var filter  = "edge[type = \'" + edgeType + "\']";
        var selector = cy.filter(filter);
        selector.show();
      });
    </script>
    <script>
      $('#full').spectrum({
            color: "#000000#",
            showInput: true,
            className: "full-spectrum",
            showInitial: true,
            showPalette: true,
            showSelectionPalette: true,
            maxSelectionSize: 10,
            preferredFormat: "hex",
            localStorageKey: "spectrum.demo",
            move: function (color) {
              nodeColor = color.toHexString();
              $('#colorCode').text(nodeColor);
              $('#colorBoard').css("background-color", nodeColor);
              $('#colorBoard').css('color', nodeColor);
              cy.$('node:selected').style('background-color', nodeColor);
                
            },
            show: function (color) {
              nodeColor = color.toHexString();
              $('#colorCode').text(nodeColor);
            },
            beforeShow: function () {
            
            },
            hide: function () {
            
            },
            change: function(color) {
              nodeColor = color.toHexString();
              $('#colorCode').text(nodeColor);
              $('#colorBoard').css("background-color", nodeColor);
              $('#colorBoard').css('color', nodeColor);
            },
            palette: [
                ["rgb(0, 0, 0)", "rgb(67, 67, 67)", "rgb(102, 102, 102)",
                "rgb(204, 204, 204)", "rgb(217, 217, 217)","rgb(255, 255, 255)"],
                ["rgb(152, 0, 0)", "rgb(255, 0, 0)", "rgb(255, 153, 0)", "rgb(255, 255, 0)", "rgb(0, 255, 0)",
                "rgb(0, 255, 255)", "rgb(74, 134, 232)", "rgb(0, 0, 255)", "rgb(153, 0, 255)", "rgb(255, 0, 255)"], 
                ["rgb(230, 184, 175)", "rgb(244, 204, 204)", "rgb(252, 229, 205)", "rgb(255, 242, 204)", "rgb(217, 234, 211)", 
                "rgb(208, 224, 227)", "rgb(201, 218, 248)", "rgb(207, 226, 243)", "rgb(217, 210, 233)", "rgb(234, 209, 220)", 
                "rgb(221, 126, 107)", "rgb(234, 153, 153)", "rgb(249, 203, 156)", "rgb(255, 229, 153)", "rgb(182, 215, 168)", 
                "rgb(162, 196, 201)", "rgb(164, 194, 244)", "rgb(159, 197, 232)", "rgb(180, 167, 214)", "rgb(213, 166, 189)", 
                "rgb(204, 65, 37)", "rgb(224, 102, 102)", "rgb(246, 178, 107)", "rgb(255, 217, 102)", "rgb(147, 196, 125)", 
                "rgb(118, 165, 175)", "rgb(109, 158, 235)", "rgb(111, 168, 220)", "rgb(142, 124, 195)", "rgb(194, 123, 160)",
                "rgb(166, 28, 0)", "rgb(204, 0, 0)", "rgb(230, 145, 56)", "rgb(241, 194, 50)", "rgb(106, 168, 79)",
                "rgb(69, 129, 142)", "rgb(60, 120, 216)", "rgb(61, 133, 198)", "rgb(103, 78, 167)", "rgb(166, 77, 121)",
                "rgb(91, 15, 0)", "rgb(102, 0, 0)", "rgb(120, 63, 4)", "rgb(127, 96, 0)", "rgb(39, 78, 19)", 
                "rgb(12, 52, 61)", "rgb(28, 69, 135)", "rgb(7, 55, 99)", "rgb(32, 18, 77)", "rgb(76, 17, 48)"]
            ]
        });
    </script>
    <script>
      $('#full2').spectrum({
            color: "#000000",
            showInput: true,
            className: "full-spectrum",
            showInitial: true,
            showPalette: true,
            showSelectionPalette: true,
            maxSelectionSize: 10,
            preferredFormat: "hex",
            localStorageKey: "spectrum.demo",
            move: function (color) {
              //nodeColor = color.toHexString();
              $('#lineColorCode').text(color.toHexString());
              $('#lineColorBoard').css('color', color.toHexString());
              $('#lineColorBoard').css('background-color', color.toHexString())
              cy.$('edge:selected').style('line-color', color.toHexString());
                
            },
            show: function (color) {
            },
            beforeShow: function () {
            
            },
            hide: function () {
            
            },
            change: function(color) {
            },
            palette: [
                ["rgb(0, 0, 0)", "rgb(67, 67, 67)", "rgb(102, 102, 102)",
                "rgb(204, 204, 204)", "rgb(217, 217, 217)","rgb(255, 255, 255)"],
                ["rgb(152, 0, 0)", "rgb(255, 0, 0)", "rgb(255, 153, 0)", "rgb(255, 255, 0)", "rgb(0, 255, 0)",
                "rgb(0, 255, 255)", "rgb(74, 134, 232)", "rgb(0, 0, 255)", "rgb(153, 0, 255)", "rgb(255, 0, 255)"], 
                ["rgb(230, 184, 175)", "rgb(244, 204, 204)", "rgb(252, 229, 205)", "rgb(255, 242, 204)", "rgb(217, 234, 211)", 
                "rgb(208, 224, 227)", "rgb(201, 218, 248)", "rgb(207, 226, 243)", "rgb(217, 210, 233)", "rgb(234, 209, 220)", 
                "rgb(221, 126, 107)", "rgb(234, 153, 153)", "rgb(249, 203, 156)", "rgb(255, 229, 153)", "rgb(182, 215, 168)", 
                "rgb(162, 196, 201)", "rgb(164, 194, 244)", "rgb(159, 197, 232)", "rgb(180, 167, 214)", "rgb(213, 166, 189)", 
                "rgb(204, 65, 37)", "rgb(224, 102, 102)", "rgb(246, 178, 107)", "rgb(255, 217, 102)", "rgb(147, 196, 125)", 
                "rgb(118, 165, 175)", "rgb(109, 158, 235)", "rgb(111, 168, 220)", "rgb(142, 124, 195)", "rgb(194, 123, 160)",
                "rgb(166, 28, 0)", "rgb(204, 0, 0)", "rgb(230, 145, 56)", "rgb(241, 194, 50)", "rgb(106, 168, 79)",
                "rgb(69, 129, 142)", "rgb(60, 120, 216)", "rgb(61, 133, 198)", "rgb(103, 78, 167)", "rgb(166, 77, 121)",
                "rgb(91, 15, 0)", "rgb(102, 0, 0)", "rgb(120, 63, 4)", "rgb(127, 96, 0)", "rgb(39, 78, 19)", 
                "rgb(12, 52, 61)", "rgb(28, 69, 135)", "rgb(7, 55, 99)", "rgb(32, 18, 77)", "rgb(76, 17, 48)"]
            ]
        });
    </script>
    <script>
      $(function() {
        var bgcolor = "background-color:"+"\'" + nodeColor +"\'";
        $('#colorBoard').css("background-color", nodeColor);
        $('#colorBoard').css("color", nodeColor);
        $('#colorCode').css("text", nodeColor);
      })
    </script>
    <script>
      $("#Shape li a").click(function() {
        var imgPath = "\'img/"+ $(this).attr('value') + ".png\'";
        var shape = $(this).attr('value');
        var path = "/static/img/" +  shape + '.png'
        $("#imgShape").attr("src", path);
        $("#imgShape").css('text-align', 'right');
        $('#shapeText').text(shape);
        cy.$('node:selected').style('shape', shape);
      });
    </script>
    <script>
      $("#lineStyle li a").click(function () {
        var imgPath = "\'img/"+ $(this).attr('value') + ".png\'";
        var lineStyle  = $(this).attr('value');
        var path = "/static/img/" + lineStyle + '.png'
        $('#imgLine').attr('src', path);
        $('#imgLine').css('text-align', 'right');
        $('#lineText').text(lineStyle);
        cy.$('edge:selected').style('line-style', lineStyle);
     });
    </script>
    <script>
    $('#ex1').slider()
      .on('slide', function(ev){
       cy.$('node:selected').style('height', ev.value);
       cy.$('node:selected').style('width', ev.value);
      });
    </script>
    <script>
      $('#ex2').slider()
      .on('slide', function(ev){
        cy.$('edge:selected').style('width', ev.value);
      });
    </script>
    <script type="text/javascript">
      $('#btn-screen-full').click(function() {
        event.preventDefault();
      $('#modal').iziModal('open');
      $('.cy-panzoom').hide();
      var cy2 = cytoscape({
        container: document.getElementById('cy2'), 
        boxSelectionEnabled: true,
        //autounselectify: true,
        layout: {
            name: 'spread',
            minDist: 40
          },  
          style: [
            {
              selector: 'node',
              style: {
                'content': 'data(id)',
                'font-size': 8,
                'background-color': '#96d9f6',//#96d9f6
                'size': 20
              }
            },
            {
              selector: "edge",
              style: {
                'curve-style': 'haystack',
                'haystack-radius': 0,
                'width': 4,
                'opacity': 0.5,
                'line-color': '#2dc16c'
              }
            },
            {
              selector: ':selected',
              style: {
                'background-color': 'black',
                'line-color': 'black',
                'target-arrow-color': 'black',
                'source-arrow-color': 'black',
                'opacity': 3
              }
            }
          ], 
          elements: net,        
        });//cy

        cy2.panzoom({}); 

        cy2.on('mouseover', 'node', function(event) {
          var node = event.cyTarget;
          nodeIndex = '<p>%s</p>'.format(node.id());

          node.qtip({
            content: nodeIndex,
            
            show: {
              event: event.type,
              ready: true
            },

            hide: {
              event: 'mouseout unfocus'
            },

            style: {
              classes: 'qtip-bootstrap',
              tip: {
                width: 16,
                height: 8
              }
            }

          }, event);
        });
      });
    </script>