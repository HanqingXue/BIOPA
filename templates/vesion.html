<!DOCTYPE html>
<!-- saved from url=(0041)http://v2.bootcss.com/examples/fluid.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>Vesion</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
    <!-- Le styles -->
    <link href="{{ static_url('css/bootstrap.css') }}" rel="stylesheet">
    <link rel="stylesheet" href="{{ static_url('css/style.css')}}">
    <link rel="stylesheet" href="{{ static_url('css/docs.min.css')}}">
    <link href="{{ static_url('css/bootstrap-responsive.css') }}" rel="stylesheet">
    <link rel="stylesheet" href="{{ static_url('css/bootstrap.icon-large.min.css')}}">
    
    <link rel="stylesheet" href="{{ static_url('css/vesion.css')}}">
    <link rel="stylesheet" href="{{ static_url('css/cytoscape-context-menus.css')}}">
    <link rel="stylesheet" href="{{ static_url('css/spectrum.css') }}">
    <link rel="stylesheet" href="{{ static_url('css/flat-ui.css')}}">
    <link rel="stylesheet" href="{{ static_url('css/slider.css')}}">
    <link rel="stylesheet" type="text/css" href="{{ static_url('css/jquery.qtip.min.css')}}">
    <link rel="stylesheet" type="text/css" href="{{ static_url('css/cytoscape.js-panzoom.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ static_url('css/font-awesome.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ static_url('css/loading.css') }}"> 
    <link href="{{ static_url('css/iziModal.min.css')}}" rel="stylesheet" >
    <script src="{{ static_url('js/plotly-latest.min.js')}}"></script>
    <script src="{{ static_url('js/jquery.js')}}"></script>
    <script src="{{ static_url('js/bootstrap.min.js')}}"></script>
    <script src="{{ static_url('js/cytoscape.min.js')}}"></script>
    <script src="{{ static_url('js/cy-spread.js') }}"></script>
    <script src="{{ static_url('js/download.js')}}"></script>
    <script src="{{ static_url('js/cytoscape-context-menus.js')}}"></script>
    <script src="{{ static_url('js/spectrum.js') }}"></script>
    <script src="{{ static_url('js/bootstrap-slider.js')}}"></script>
    <script src="{{ static_url('js/site.js')}}"></script>
    <script src="{{ static_url('js/juqery.qtip.min.js')}}"></script>
    <script src="{{ static_url('js/qtip.js')}}"></script>
    <script src="{{ static_url('js/cytoscape-panzoom.js') }}"></script>
    <script type="text/javascript" src="{{ static_url('js/dagre.js') }}"></script>
    <script type="text/javascript" src="{{ static_url('js/cytoscape-dagre.js') }}"></script>
    <script type="text/javascript" src="{{ static_url('js/cytoscape-navigator.js') }}"></script>
    <script src="{{ static_url('js/iziModal.min.js')}}"></script>
    <script src="{{ static_url('js/echarts.min.js') }}"></script>
    <style> 
      #cy {
        width: 100%;
        height: 100%;
        left: 0;
        top: 0;
        z-index: 999;
      }
      .td {
        text-align: right;
      }
      #ex1Slider .slider-selection {
        background: #BABABA;
      }
      .edge_btn {
        width: 100%;
        height: 100%;
        display: inline-table;
        padding: 6px;
        color: white;
      }
    
     .pubmed {
        background-color: #285287;
      }

      .mex {
        background-color: #796395;
      }
      span > a {
        color: white;
      }
      .wrapper {
        display: table;
      }
      .cell {
        display: table-cell;
        vertical-align: middle;
      }
    </style>
  </head>
  <body style="padding-top:0px">

    <div class="navbar navbar-inverse navbar-fixed-top" style="position: static" >
      <div class="navbar-inner">
        <div class="container-fluid">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="/">BioPA</a>
          <div class="nav-collapse collapse">
            <p class="navbar-text pull-right">
              Logged in as <a href="" class="navbar-link">Username</a>
            </p>
            <ul class="nav">
              <li class="active"><a href="/">Home</a></li>
              <li><a href="about">About</a></li>
              <li><a href="contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>
    
    <h2 id="net" style="display: none"> {{ hello }}</h2>
    <div class="container-fluid">
      <div class="row">
          <div class="span4 hero-unit bs-example bs-example-tabs">
            <ul id="myTab" class="nav nav-tabs">
              <li class="active">
                <a href="#home" data-toggle="tab" id="Nodetab">
                   Node
                </a>
              </li>
             <li><a href="#edge-detail" data-toggle="tab">Edge</a></li>
            <li><a href="#ios" data-toggle="tab">Summary</a></li>
            <li><a href="#jmeter" tabindex="-1" data-toggle="tab">Style</a></li>
            </ul>
            <div id="myTabContent" class="tab-content">
              <div class="tab-pane fade in active" id="home" style="overflow: hidden; border-top: 0px">
                <div id="Detail-tips"">
                  <p id="help-text" class="help-text palette palette-silver">Click on the node or edge on in the network to see more info</p>
                  <img id="arrow" src="{{ static_url('img/turn-right.png')}}">
                </div><!--Detail-tips-->
                <div id="Detail-table" class="table table-bordered table-striped table-responsive table-condensed table-hover" style="display: none; " aria-labelledby="li-detail">
                  <table style="border: 0">
                    <tbody>
                      <tr>
                        <td colspan="2" ><h5 id="gene-title">Gene Name</h5></td>
                      </tr>
                      <tr>
                        <th class="span6">UniProtID</th>
                        <td id="UniProtID" class="span6"><a href="">null</a></td>
                      </tr>
                      <tr>
                        <th>HGNC</th>
                        <td id="HGNC">3233</td>
                      </tr>
                      <tr>
                        <th>OMIM</th>
                        <td id="OMIM">604267 </td>
                      </tr>
                      <tr>
                        <th>UniProtKB</th>
                        <td id="Protein">Q7Z7M0</td>
                      </tr>
                      <tr>
                        <th>Ensembl</th>
                        <td id="cDNA">ENSG00000105429</td>
                      </tr>
                      <tr>
                        <th>Entrez Gene</th>
                        <td id="Atlas">1954</td>
                      </tr>
                    </tbody>
                  </table>
                </div><!--Deatil-table-->
              </div><!--first tab-->
              <div class="tab-pane fade" id="ios" style="overflow: hidden; border-top: 0px">
                <div id="edge-type" class="table table-bordered table-striped table-responsive table-condensed table-hover">
                  <table >
                    <tbody>
                      <tr>
                        <th colspan="3" class="span12"><h4>Edge Types</h4></th>
                      </tr>
                      {% for edge_name in edge_types %}
                          <tr>
                            <td class="span2" id="{{ edge_name }}-num"></td>
                            <th class="span9">
                              <button class="edge_btn" id="{{ edge_name }}-btn">{{ edge_name }}</button>
                            </th>
                            <td class="span1">
                              <a class="icon-remove" value="{{ edge_name }}"></a>
                              <a class="icon-plus" value="{{ edge_name }}"></a>
                            </td>
                          </tr>
                      {% end %}                 
                    </tbody>
                  </table>
                </div><!---edge Type-->
              </div>
              <div class="tab-pane fade" id="edge-detail">
                <div id="edge-type" class="table table-bordered table-striped table-responsive table-condensed table-hover">
                  <table style="border: 0" id="interactTable">
                    <tbody>
                      <tr>
                        <td colspan="2" ><h5 id="edge-title">Edge-Edge</h5></td>
                      </tr>
                      <tr>
                        <th class="span6">Interactions</th>
                        <td id="interactions" class="span6">
                          <span class="label label-info" id="edgeTypeLabel">null</span>
                        </td>
                      </tr>
                      <tr>
                        <th>Pathway Name</th>
                        <td id="PathwayName"><span class="label label-info">null</span></td>
                      </tr>
                      <tr>
                        <th>Manuscripts</th>
                        <td id="Manuscripts">null</td>
                      </tr>
                      <tr>
                        <th>Effect</th>
                        <td id="Effect">null</td>
                      </tr>
                    </tbody>
                  </table>
                </div><!---edge Type-->
              </div>
              <div class="tab-pane fade" id="jmeter" style="overflow: hidden; border-top: 0px">
                <div id="color-picker" class="table table-striped table-condensed table-striped table-responsive table-hover" style="height: 500px">
                  <table id = 'node-style'>
                    <tbody>
                      <tr>
                        <td colspan="4"><h5>Node style</h5></td>
                      </tr>
                      <tr>
                        <th class="span2" style="line-height: 50px">Shape</th>
                        <td class="span3" style="line-height: 50px">
                          <img src="{{ static_url('img/ellipse.png')}}" id="imgShape">
                        </td>
                        <td class="span3" style="line-height: 50px" id="shapeText">Ellipse</td>
                        <td class="span4"><!-- Single button -->
                          <!-- Inverted skin  -->
                            <div class="btn-group"">
                              <button class="btn " type="button" data-toggle="dropdown" style="background-color: '#f9f9f9'">
                                <span class="icon-cog"></span>
                              </button>
                              <ul class="dropdown-menu " role="menu" id="Shape">
                                <li><a href="#"  value="ellipse">Ellipse</a></li>
                                <li><a href="#"  value="rectangle">Rectangle</a></li>
                                <li><a href="#"  value="triangle">Triangle</a></li>
                                <li><a href="#"  value="pentagon">Pentagon</a></li>
                                <li><a href="#"  value="hexgon">Hexgon</a></li>
                                <li><a href="#"  value="heptagon">Heptagon</a></li>
                                <li><a href="#"  value="octagon">Octagon</a></li>
                                <li><a href="#"  value="star">Star</a></li></li>
                                <li><a href="#"  value= "diamond">Diamond</a></li>
                                <li><a href="#"  value="vee">Vee</a></li>
                                <li><a href="#"  value="rhomboid">Rhomboid</a></li>
                              </ul>
                            </div>
                        </td>
                      </tr>
                      <tr>
                        <th style="line-height: 50px">Color</th>
                        <td>
                          <div style="background-color: black;color: black; height: 48px"  id="colorBoard"> hllow</div>
                        </td>
                        <td style="line-height: 50px" id="colorCode">
                          #000000
                        </td>
                        <td>
                          <div class="btn-group" ">
                            <a href="" class="btn .btn-default icon-pencil" id="full"><span class="icon-pencil"></span></a>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <th>Size</th>
                        <td colspan="3">
                         <input id="ex1" data-slider-id='ex1Slider' type="text" data-slider-min="20" data-slider-max="100" data-slider-step="1" data-slider-value="30"/>
                        </td>
                      </tr>
                      <tr>
                        <th colspan="4"><h5>Edge Style</h5></th>
                      </tr>
                      <tr >
                        <th style="line-height: 50px">Style</th>
                        <td style="line-height: 50px">
                          <img src=" {{ static_url('img/solid.png') }}" id="imgLine">
                        </td>
                        <td style="line-height: 50px" id="lineText">Solid</td>
                        <td>
                            <div class="btn-group"">
                              <button class="btn " type="button" data-toggle="dropdown" style="background-color: '#f9f9f9'">
                                <span class="icon-cog"></span>
                              </button>
                              <ul class="dropdown-menu " role="menu" id="lineStyle">
                                <li><a href="#"  value="solid">Solid</a></li>
                                <li><a href="#"  value="dotted">Dotted</a></li>
                                <li><a href="#"  value="dashed">Dashed</a></li>
                              </ul>
                            </div>
                        </td>
                      </tr>
                      <tr>
                        <th style="line-height: 50px">Color</th>
                        <td style="line-height: 50px">
                          <div style="background-color: black;color: black; height: 48px"  id="lineColorBoard"> hllow</div>
                        </td>
                        <td style="line-height: 50px" id="lineColorCode">#000000</td>
                        <td>
                          <div class="btn-group" ">
                            <a href="" class="btn .btn-default icon-pencil" id="full2"><span class="icon-pencil"></span></a>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <th style="line-height: 50px">Size</th>
                        <td colspan="3">
                            <input id="ex2" data-slider-id='ex1Slider' type="text" data-slider-min="1" data-slider-max="20" data-slider-step="1" data-slider-value="4"/>
                        </td>
                      </tr>
                    </tbody>              
                  </table>
                </div><!--#color-picker-->
              </div>
            </div><!--tab content-->
          </div><!--span4-->
          <div class="hero-unit span8" style="padding: 10px">
            <div class="btn-toolbar" role="toolbar">
            <div class="btn-group">
              <button class="btn btn-default" id ="btn-zoom-in" ><a title="Zoom in" class="icon-zoom-in icon-large"></a></button>
              <button class="btn btn-default" id ="btn-zoom-out"><a 
              title="Zoom Out" class ="icon-zoom-out icon-large"></a></button>
              <button class="btn btn-default" id ="btn-save" ><a title="Save" class="icon-camera icon-large"></a></button> 
              <button class="btn btn-default" id="btn-showall"><a title="Showall" class="icon-eye-open icon-large"></a></button>
              <button class="btn btn-default" id ="btn-hide-node" ><a class="icon-eye-close icon-large"></a></button>
              <button class="btn btn-default" id="btn-screen-fit"><a class="icon-repeat icon-large"></a></button>
              <button class="btn btn-default" id = "btn-screen-full"><a class="icon-resize-full icon-large"></a></button>
              <button class="btn btn-default" id="btn-analysis"><a class="icon-stats icon-large"></a></button>
              <div class="btn-group">
                <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                  <i class="icon-list icon-large"></i>
                </button>
                <ul class="dropdown-menu" id='Menu'>
                  <li><a id="Random"       value="random">Random</a></li>
                  <li><a id="Grid"         value="grid">Grid</a></li>
                  <li><a id="Circle"       value="circle">Circle</a></li>
                  <li><a id="Concentic"    value="concentric">Concentic</a></li>
                  <li><a id="BreadthFirst" value="breadthfirst">Breadth First</a></li>
                  <li><a id="Cose"         value="cose">Cose</a></li>
                  <li><a id="Preset"       value="spread">Preset</a></li>
                  <li><a id="Dagre"        value="dagre">Dagre</a>
                </ul>
              </div><!--btn-group-->
            </div>                    
            </div><!--.btn-toolbar-->
            <div id="cy" style="height: 450px; overflow: auto;overflow-x:auto"><p></p></div> 
          </div><!--.span8-->
      </div><!--row-->

      <div class="bs-example bs-example-tabs row" data-example-id="togglable-tabs" style="margin-right: auto;margin-left: auto;">
         <ul id="bottomTabs" class="nav nav-tabs">
           <li class="active">
             <a href="#gene" data-toggle="tab">
                Gene Detail
             </a>
           </li>
           <li><a href="#jmeter1"  data-toggle="tab">Disease & Drug Detail</a></li>
           <li><a href="#ejb" tabindex="-1" data-toggle="tab">Pathway Detail</a></li>
           <li><a href="#analysis" data-toggle="tab">Network Analysis</a></li>
           <li><a href="#topology" data-toggle="tab">Network Topology</a></li>
           <li><a href="#ios1" data-toggle="tab">Exprssion</a></li>
         </ul>
         <div id="myTabContent" class="tab-content">
           <div class="tab-pane fade in active" id="gene">
             <div class="table table-striped table-bordered table-hover ">
               <table id="deatilGene">
                 <tr id="tableHead">
                   <th>Gene Id</th>
                   <th>Gene name</th>
                   <th>Genomic Coordinates</th>
                   <th>HGNC</th>
                   <th>OMIM</th>
                   <th>Pfam</th>
                   <th>Protein Sequence</th>
                   <th>Swiss-prot</th>
                   <th>Synonyms</th>
                   <th>TrEMBL</th>
                   <th>Transcript</th>
                   <th>cDNA Sequence</th>
                   <th>Atlas Genetic Oncology</th>
                   <th>CCDS</th>
                   <th>Copy Number</th>
                 </tr>
               </table>
             </div><!--table-->
           </div><!--#home1-->
           <div class="tab-pane fade" id="ios1">
             <div id="plotly-div"></div>
           </div>
           <div class="tab-pane fade" id="jmeter1">
             <div class="table table-striped table-bordered table-responsive table-hover">
               <table id="drugTable">
                 <tr id="drugtableTitle">
                   <th class="span1">Entry</th>
                   <th class="span2">Name</th>
                   <th class="span6">Description</th>
                   <th class="span1">Category</th>
                   <th class="span1">Pathway</th>
                   <th class="span1">Drug</th>
                 </tr>
               </table>
             </div>
           </div>
           <div class="tab-pane fade" id="analysis">
             <table class="table table-striped table-bordered table-responsive table-hover">
               <tbody>
                <tr>
                 <th>Degree</th>
                 <th>Degree Centrality</th>
                 <th>Closeness Centrality</th>
                 <th>Betweenness Centrality</th>
                </tr>
                <tr>
                  <th id="degree">null</th>
                  <th id="node_dc">null</th>
                  <th id="node_cc">null</th>
                  <th id="node_bc">null</th>
                </tr>
               </tbody>
             </table>
           </div>
           <div class="tab-pane fade" id="topology">
              <div id="degreeDis" style="height:300px;" class="span6 wrapper">
                <div class="loader demo-2 cell" style="text-align: center;vertical-align: middle;"> 
                  <div class="loading"> 
                   <i></i> 
                   <i></i> 
                   <i></i> 
                   <i></i> 
                   <i></i> 
                  </div> 
                 </div> 
              </div>
              <div id="shortpathDis" class="span6 wrapper" style="height:300px;" >
                <div class="loader demo-2 cell" style="text-align: center;vertical-align: middle;"> 
                  <div class="loading"> 
                   <i></i> 
                   <i></i> 
                   <i></i> 
                   <i></i> 
                   <i></i> 
                  </div> 
                 </div> 
              </div>
           </div>
           <div class="tab-pane fade" id="ejb">
             <div class="table table-striped table-bordered table-hover table-responsive span12">
               <table id="pathwayTable">
                 <tr>
                   <th>PathwayID</th>
                   <th>Discript</th>
                 </tr>
                 <td>
                   <th>PID_4796</th>
                   <th>To link to full-text access for this article, visit this link: http:/​/​dx.doi.org/​10.1016/​j.asr.2012.05.024 Byline: Liming Zhao (a), Nancy Tanjung (a), Gaurav Swarnkar (a), Eric Ledet (b), Hiroki Yokota (a)(c) Keywords: eIF2[alpha]; Phosphorylation; Hindlimb unloading; Tibia loading; STS-135; Unloading Abstract: a* Mechanical loading to the tibia decreases integrated stress responses. a* Hindlimb unloading increases integrated stress responses in the tibia. a* A release from hindlimb unloading reduces integrated stress responses. a* A return to Earth gravity from space suppresses integrated stress responses. a* A period of 2-4h is sufficient to induce this suppressive outcome. Author Affiliation: (a) Department of Biomedical Engineering, Indiana University Purdue University Indianapolis, Indianapolis, IN 46202, USA (b) Department of Biomedical Engineering, Rensselaer Polytechnic Institute, Troy, NY 12180, USA (c) Department of Anatomy and Cell Biology, Indiana University School of Medicine, Indianapolis, IN 46202, USA Article History: Received 14 April 2012; Revised 24 May 2012; Accepted 26 May 2012</th>
                 </td>
               </table>
             </div><!--TABLE-->
           </div>
          </div>
        </div><!--row-->

      <div id="modal" class="iziModal isFullscreen">
        <div class="iziModal-header iziModal-noSubtitle" style="background: rgb(136, 160, 185);padding-right: 70px">
          <h2 class="iziModal-header-title">Fullscreen of network</h2>
          <div class="iziModal-header-buttons">
            <button class="iziModal-button iziModal-button-close" data-izimodal-close="" data-izimodal-transitionout="bounceOutDown" id="close-btn"></button>
          </div>
        </div>
        <div class="iziModal-wrap" >
          <div class="iziModal-content" id="cy2" style="height: 600px; width: 1200px">
          </div>
        </div>
      </div> <!--#modal-->
      <div class="alert alert-warning alert-dismissible fade show" role="alert">
  <strong>Holy guacamole!</strong> You should check in on some of those fields below.
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
      <hr> 
      <footer>
        <p>© Harbin Institute of Technology 2017</p>
      </footer>
    </div><!--/.fluid-container-->
    <script type="text/javascript">
      /*
      Define the global variables
      */
      var cy = new Object();
      var clickMenu = new Object();
      var nodeColor = '#000000';
      var tableDetail = new Object();
      var opt = new Object();
    </script>
    <script>
    $(function() {
      net = JSON.parse($('#net').text());
      cy = cytoscape({
        container: document.getElementById('cy'), 
        boxSelectionEnabled: true,
        //autounselectify: true,
        layout: {
            name: 'spread',
          }, 
          
          style: [
            {
              selector: 'node',
              style: {
                'font-size': 4,
                'background-color': '#96d9f6',//#96d9f6
                'size': 20,
                'content': 'data(id)',
                "text-valign": "center",
                "text-halign": "center",
                "width": "mapData(score, 0, 0.006769776522008331, 20, 60)",
                "height": "mapData(score, 0, 0.006769776522008331, 20, 60)",
                "text-outline-color": "#555",
                "text-outline-width": "2px",
                "color": "#fff",
                "overlay-padding": "6px",
                "z-index": "10"
              }
            },

            {
              selector: "edge",
              style : {
                'curve-style': 'haystack',
                'haystack-radius': 0.5,
                'opacity': 0.4,
                'line-color': "#bbb",
                'width': "mapData(weight, 0, 1, 1, 8)",
                'overlay-padding': "3px"
              }
            },
            {
              selector:  "edge[type = 'CAI']",
              style: {
                'line-color': '#8840A7'
              }
            },
           
            {
              selector:  "edge[type = 'BRR']",
              style: {
                'line-color': '#1139AA'
              }
            },

            {
              selector:  "edge[type = 'MI']",
              style: {
                'line-color': '#1DC600'
              }
            },

            {
              selector:  "edge[type = 'TBRR']",
              style: {
                'line-color': '#20C3C9'
              }
            },

            {
              selector:  "edge[type = 'ER']",
              style: {
                'line-color': '#C8AA64'
              }
            },
             {
               "selector": "node:selected",
                "style": {
                    "border-width": "6px",
                    "border-color": "#AAD8FF",
                    "border-opacity": "0.5",
                    "background-color": "#77828C",
                    "text-outline-color": "#77828C"
              }
            }
            ,
            {
              selector: 'edge:selected',
              style: {
                'background-color': '#000000',
                'line-color': 'black',
                'target-arrow-color': 'black',
                'source-arrow-color': 'black',
                'opacity': 3
              }
            }
          ], 
    
          elements: net,        
        });//cy 
         
        // cy panzoom plugin 
        cy.panzoom({});

        cy.on('tap', function(event){
          var evtTarget = event.cyTarget;
          $('#Detail').addClass('active in');
          if( evtTarget === cy ){
              cy.trigger('boxstart');
          } else {
  
            if (event.cyTarget.isNode()) {
              var node = event.cyTarget;
              nodeIndex = '#' + node.id();
              cy.zoom(2);
              cy.center(nodeIndex);

              $('#myTab li:eq(0) a').tab('show');
              $('#bottomTabs li:eq(3) a').tab('show');
              firstNodeClick();
              setUpNodeTable(node.id());
              setUpAnalysisTable(node.id());
            }//end of event.cyTarget.isNode()

            if (event.cyTarget.isEdge()) {
              $('#Detail-table').hide();
              $('#myTab li:eq(1) a').tab('show');
              var edge = event.cyTarget;
              var source = edge.source();
              var target = edge.target();
              $('#edge-title').text(source.id() + '-' + target.id());
              var edgeInfo = getEdge(source.id(), target.id());
              $('#interactTable').show();
              setUpEdgeTable(edgeInfo);
            }
          }//end-else
        });//end-cy.on

        cy.on('mouseover', 'node', function(event) {
          var node = event.cyTarget;
          nodeIndex = '<p>%s</p>'.format(node.id());

          node.qtip({
            content: 'table',
            
            show: {
              event: event.type,
              ready: true
            },

            hide: {
              event: 'mouseout unfocus'
            },

            style: {
              classes: 'qtip-bootstrap',
              tip: {
                width: 16,
                height: 8
              }
            }

          }, event);
        });
      })
    </script>
    <script type="text/javascript">
      $(function() {
        $('#modal').iziModal({
          onClosed: function(modal) {
            $('.cy-panzoom').show();
          }
        });
      })
    </script>
    <script type="text/javascript">
      $('#btn-analysis').click(function() {
        $('#bottomTabs li:eq(4) a').tab('show');
        var degreeDis =  getDegreeDistribute(cy);
        plotDistribute(degreeDis, 'degreeDis', 'Degree distribution', 'Degree');
        var pathDis = getPathDistribute(cy);
        plotDistribute(pathDis, 'shortpathDis', 'Shortest path distribution', 'Path length');
      });
    </script>
   <!-- <script src="{{ static_url('js/heatmap.js')}}"></script>-->
    <script>
      $(function(){
        {% for edge_name in edge_types %}
          var edge_name = "{{ edge_name }}";
          var edge_color = "{{ edge_types[edge_name] }}";
          var edge = cy.filter("edge[type = \'" + edge_name + "\']");
          $('#' + edge_name + '-num').text(edge.length);
          $('#' + edge_name + '-btn').css('background-color', edge_color);
        {% end %}
        $('#ex1').slider({
           formatter: function(value) {
             return 'Current value: ' + value;
           }
        });
        $('#ex2').slider({
           formatter: function(value) {
             return 'Current value: ' + value;
           }
        });  
      });
    </script>
    <script>
      function selectAllOfTheSameType(ele) {
        cy.elements().unselect();
        if(ele.isNode()) {
          cy.nodes().select();
        }
        else if(ele.isEdge()) {
          cy.edges().select();
        }
      }
    </script>
    <script>
      $(function() {
        cy.contextMenus({
          menuItems: [
              {
                  id: 'remove',
                  title: 'remove',
                  selector: 'node, edge',
                  onClickFunction: function (event) {
                    event.cyTarget.remove();
                  },
                  hasTrailingDivider: true
                },
                {
                  id: 'hide',
                  title: 'hide',
                  selector: '*',
                  onClickFunction: function (event) {
                    event.cyTarget.hide();
                  },
                  disabled: false
                },
                {
                  id: 'add-node',
                  title: 'add node',
                  coreAsWell: true,
                  onClickFunction: function (event) {
                    var data = {
                        group: 'nodes'
                    };
                    
                    cy.add({
                        data: data,
                        position: {
                            x: event.cyPosition.x,
                            y: event.cyPosition.y
                        }
                    });
                  }
                },
                {
                  id: 'remove-selected',
                  title: 'remove selected',
                  coreAsWell: true,
                  onClickFunction: function (event) {
                    cy.$(':selected').remove();
                  }
                },
                {
                  id: 'select-all-nodes',
                  title: 'select all nodes',
                  selector: 'node',
                  onClickFunction: function (event) {
                    selectAllOfTheSameType(event.cyTarget);
                  }
                },
                {
                  id: 'select-all-edges',
                  title: 'select all edges',
                  selector: 'edge',
                  onClickFunction: function (event) {
                    selectAllOfTheSameType(event.cyTarget);
                  }
                },
                {
                  id: 'link kegg',
                  title: 'KEGG Link',
                  selector: 'node',
                  onClickFunction: function (event) {
                    var evtTarget = event.cyTarget;
                    if (evtTarget.id() != 'undefined') {
                      linkUrl = "http://www.kegg.jp/dbget-bin/www_bfind_sub?mode=bfind&max_hit=1000&dbkey=kegg&keywords=" + evtTarget.id();
                      window.open(linkUrl);
                    }
                  }
                },
                {
                  id: 'link common Pathway',
                  title: 'Pathway common DB Link',
                  selector: 'node',
                  onClickFunction: function (event) {
                    var evtTarget = event.cyTarget;
                    if (evtTarget.id() != 'undefined') {
                      linkUrl = "http://www.pathwaycommons.org/pc/webservice.do?version=3.0&snapshot_id=GLOBAL_FILTER_SETTINGS&record_type=PATHWAY&q="+evtTarget.id()+"&format=html&cmd=get_by_keyword"
                      window.open(linkUrl);
                    }
                  }
                },
                {
                  id: 'link reactome',
                  title: 'Reactome DB link',
                  selector: 'node',
                  onClickFunction: function (event) {
                    var evtTarget = event.cyTarget;
                    if (evtTarget.id() != 'undefined') {
                      linkUrl = "http://www.reactome.org/content/query?q="+event.cyTarget+"&species=Homo+sapiens&species=Entries+without+species&cluster=true"
                      window.open(linkUrl);
                    }
                  }
                },
                {
                  id: 'link wikipathways',
                  title: 'Wikipathways DB link',
                  selector: 'node',
                  onClickFunction: function (event) {
                    var evtTarget = event.cyTarget;
                    if (evtTarget.id() != 'undefined') {
                      linkUrl = "http://www.wikipathways.org//index.php?query="+event.cyTarget+"&title=Special%3ASearchPathways&doSearch=1&sa=Search"
                      window.open(linkUrl);
                    }
                  }
                },
              ],
              menuItemClasses: ['custom-menu-item'],
              contextMenuClasses: ['custom-context-menu']
          });//end-menu
      });
    </script>
    <script>
      $('#btn-screen-fit').click(function() {
        cy.fit();
      });
    </script>
    <script>
      $('#btn-save').click(function() {
        var png64 = cy.png({
          bg : "#ffffff"
        });
        download(png64, 'net.png', 'image/png');
      });
    </script>
    <script>
      $('#btn-zoom-in').click(function () {
       var zoom =  cy.zoom()
        zoom = zoom  + 0.05;
        if ( zoom > 9 ){
          zoom = 9;
        }
        cy.zoom({
          level: zoom
        });
      });
    </script>
    <script>
      $('#btn-zoom-out').click(function () {
        var zoom = cy.zoom();
        zoom = zoom - 0.05;
        if( zoom < cy.minZoom()){
          zoom = 0.05;
        }
        cy.zoom({
          level: zoom
        });
      });
    </script>
    <script>
      $('#Menu li a').click(function(){
        var layoutName = $(this).attr('value');
        var layout = cy.makeLayout({
          name : layoutName
        });
        layout.run();
      });
    </script>
    <script>
      $('#leftControlMenu li a').click(function(e) {
        $('#help-text').hide();
        $('help-text').css('margin-top: 0px');
        $('#arrow').hide();
        $('#Deatil-table').show();
        e.preventDefault();
        $(this).tab('show');
      })
    </script>
    <script>
      $("#btn-hide-node").click(function(){
        cy.$(':selected').hide();

      })
      $('#btn-showall').click(function() {
        cy.$('node').show();
        cy.$('edge').show();
      })
    </script>
    <script>
      $('a.icon-remove').click(function() {
        var edgeType = $(this).attr('value');
        $('tr#' + edgeType).remove();
        var filter  = "edge[type = \'" + edgeType + "\']";
        var selector = cy.filter(filter);
        selector.hide();
      });
    </script>
    <script>
      $('a.-plus').click(function() {
        var edgeType = $(this).attr('value');
        $('tr#' + edgeType).remove();
        var filter  = "edge[type = \'" + edgeType + "\']";
        var selector = cy.filter(filter);
        selector.show();
      });
    </script>
    <script>
      $('#full').spectrum({
            color: "#000000#",
            showInput: true,
            className: "full-spectrum",
            showInitial: true,
            showPalette: true,
            showSelectionPalette: true,
            maxSelectionSize: 10,
            preferredFormat: "hex",
            localStorageKey: "spectrum.demo",
            move: function (color) {
              nodeColor = color.toHexString();
              $('#colorCode').text(nodeColor);
              $('#colorBoard').css("background-color", nodeColor);
              $('#colorBoard').css('color', nodeColor);
              cy.$('node:selected').style('background-color', nodeColor);
                
            },
            show: function (color) {
              nodeColor = color.toHexString();
              $('#colorCode').text(nodeColor);
            },
            beforeShow: function () {
            
            },
            hide: function () {
            
            },
            change: function(color) {
              nodeColor = color.toHexString();
              $('#colorCode').text(nodeColor);
              $('#colorBoard').css("background-color", nodeColor);
              $('#colorBoard').css('color', nodeColor);
            },
            palette: [
                ["rgb(0, 0, 0)", "rgb(67, 67, 67)", "rgb(102, 102, 102)",
                "rgb(204, 204, 204)", "rgb(217, 217, 217)","rgb(255, 255, 255)"],
                ["rgb(152, 0, 0)", "rgb(255, 0, 0)", "rgb(255, 153, 0)", "rgb(255, 255, 0)", "rgb(0, 255, 0)",
                "rgb(0, 255, 255)", "rgb(74, 134, 232)", "rgb(0, 0, 255)", "rgb(153, 0, 255)", "rgb(255, 0, 255)"], 
                ["rgb(230, 184, 175)", "rgb(244, 204, 204)", "rgb(252, 229, 205)", "rgb(255, 242, 204)", "rgb(217, 234, 211)", 
                "rgb(208, 224, 227)", "rgb(201, 218, 248)", "rgb(207, 226, 243)", "rgb(217, 210, 233)", "rgb(234, 209, 220)", 
                "rgb(221, 126, 107)", "rgb(234, 153, 153)", "rgb(249, 203, 156)", "rgb(255, 229, 153)", "rgb(182, 215, 168)", 
                "rgb(162, 196, 201)", "rgb(164, 194, 244)", "rgb(159, 197, 232)", "rgb(180, 167, 214)", "rgb(213, 166, 189)", 
                "rgb(204, 65, 37)", "rgb(224, 102, 102)", "rgb(246, 178, 107)", "rgb(255, 217, 102)", "rgb(147, 196, 125)", 
                "rgb(118, 165, 175)", "rgb(109, 158, 235)", "rgb(111, 168, 220)", "rgb(142, 124, 195)", "rgb(194, 123, 160)",
                "rgb(166, 28, 0)", "rgb(204, 0, 0)", "rgb(230, 145, 56)", "rgb(241, 194, 50)", "rgb(106, 168, 79)",
                "rgb(69, 129, 142)", "rgb(60, 120, 216)", "rgb(61, 133, 198)", "rgb(103, 78, 167)", "rgb(166, 77, 121)",
                "rgb(91, 15, 0)", "rgb(102, 0, 0)", "rgb(120, 63, 4)", "rgb(127, 96, 0)", "rgb(39, 78, 19)", 
                "rgb(12, 52, 61)", "rgb(28, 69, 135)", "rgb(7, 55, 99)", "rgb(32, 18, 77)", "rgb(76, 17, 48)"]
            ]
        });
    </script>
    <script>
      $('#full2').spectrum({
            color: "#000000",
            showInput: true,
            className: "full-spectrum",
            showInitial: true,
            showPalette: true,
            showSelectionPalette: true,
            maxSelectionSize: 10,
            preferredFormat: "hex",
            localStorageKey: "spectrum.demo",
            move: function (color) {
              //nodeColor = color.toHexString();
              $('#lineColorCode').text(color.toHexString());
              $('#lineColorBoard').css('color', color.toHexString());
              $('#lineColorBoard').css('background-color', color.toHexString())
              cy.$('edge:selected').style('line-color', color.toHexString());
                
            },
            show: function (color) {
            },
            beforeShow: function () {
            
            },
            hide: function () {
            
            },
            change: function(color) {
            },
            palette: [
                ["rgb(0, 0, 0)", "rgb(67, 67, 67)", "rgb(102, 102, 102)",
                "rgb(204, 204, 204)", "rgb(217, 217, 217)","rgb(255, 255, 255)"],
                ["rgb(152, 0, 0)", "rgb(255, 0, 0)", "rgb(255, 153, 0)", "rgb(255, 255, 0)", "rgb(0, 255, 0)",
                "rgb(0, 255, 255)", "rgb(74, 134, 232)", "rgb(0, 0, 255)", "rgb(153, 0, 255)", "rgb(255, 0, 255)"], 
                ["rgb(230, 184, 175)", "rgb(244, 204, 204)", "rgb(252, 229, 205)", "rgb(255, 242, 204)", "rgb(217, 234, 211)", 
                "rgb(208, 224, 227)", "rgb(201, 218, 248)", "rgb(207, 226, 243)", "rgb(217, 210, 233)", "rgb(234, 209, 220)", 
                "rgb(221, 126, 107)", "rgb(234, 153, 153)", "rgb(249, 203, 156)", "rgb(255, 229, 153)", "rgb(182, 215, 168)", 
                "rgb(162, 196, 201)", "rgb(164, 194, 244)", "rgb(159, 197, 232)", "rgb(180, 167, 214)", "rgb(213, 166, 189)", 
                "rgb(204, 65, 37)", "rgb(224, 102, 102)", "rgb(246, 178, 107)", "rgb(255, 217, 102)", "rgb(147, 196, 125)", 
                "rgb(118, 165, 175)", "rgb(109, 158, 235)", "rgb(111, 168, 220)", "rgb(142, 124, 195)", "rgb(194, 123, 160)",
                "rgb(166, 28, 0)", "rgb(204, 0, 0)", "rgb(230, 145, 56)", "rgb(241, 194, 50)", "rgb(106, 168, 79)",
                "rgb(69, 129, 142)", "rgb(60, 120, 216)", "rgb(61, 133, 198)", "rgb(103, 78, 167)", "rgb(166, 77, 121)",
                "rgb(91, 15, 0)", "rgb(102, 0, 0)", "rgb(120, 63, 4)", "rgb(127, 96, 0)", "rgb(39, 78, 19)", 
                "rgb(12, 52, 61)", "rgb(28, 69, 135)", "rgb(7, 55, 99)", "rgb(32, 18, 77)", "rgb(76, 17, 48)"]
            ]
        });
    </script>
    <script>
      $(function() {
        var bgcolor = "background-color:"+"\'" + nodeColor +"\'";
        $('#colorBoard').css("background-color", nodeColor);
        $('#colorBoard').css("color", nodeColor);
        $('#colorCode').css("text", nodeColor);
      })
    </script>
    <script>
      $("#Shape li a").click(function() {
        var imgPath = "\'img/"+ $(this).attr('value') + ".png\'";
        var shape = $(this).attr('value');
        var path = "/static/img/" +  shape + '.png'
        $("#imgShape").attr("src", path);
        $("#imgShape").css('text-align', 'right');
        $('#shapeText').text(shape);
        cy.$('node:selected').style('shape', shape);
      });
    </script>
    <script>
      $("#lineStyle li a").click(function () {
        var imgPath = "\'img/"+ $(this).attr('value') + ".png\'";
        var lineStyle  = $(this).attr('value');
        var path = "/static/img/" + lineStyle + '.png'
        $('#imgLine').attr('src', path);
        $('#imgLine').css('text-align', 'right');
        $('#lineText').text(lineStyle);
        cy.$('edge:selected').style('line-style', lineStyle);
     });
    </script>
    <script>
    $('#ex1').slider()
      .on('slide', function(ev){
       cy.$('node:selected').style('height', ev.value);
       cy.$('node:selected').style('width', ev.value);
      });
    </script>
    <script>
      $('#ex2').slider()
      .on('slide', function(ev){
        cy.$('edge:selected').style('width', ev.value);
      });
    </script>
    <script type="text/javascript">
      $('#btn-analysis').click(function() {
        $('#exampleModal').modal();
      });
    </script>
    <script type="text/javascript">
      $('#btn-screen-full').click(function() {
        event.preventDefault();
      $('#modal').iziModal('open');
      $('.cy-panzoom').hide();
      var cy2 = cytoscape({
        container: document.getElementById('cy2'), 
        boxSelectionEnabled: true,
        //autounselectify: true,
        layout: {
            name: 'spread',
            minDist: 40
          },  
          style: [
            {
              selector: 'node',
              style: {
                'content': 'data(id)',
                'font-size': 8,
                'background-color': '#96d9f6',//#96d9f6
                'size': 20
              }
            },
            {
              selector: "edge",
              style: {
                'curve-style': 'haystack',
                'haystack-radius': 0,
                'width': 4,
                'opacity': 0.5,
                'line-color': '#2dc16c'
              }
            },
            {
              selector: ':selected',
              style: {
                'background-color': 'black',
                'line-color': 'black',
                'target-arrow-color': 'black',
                'source-arrow-color': 'black',
                'opacity': 3
              }
            }
          ], 
          elements: net,        
        });//cy

        cy2.panzoom({}); 

        cy2.on('mouseover', 'node', function(event) {
          var node = event.cyTarget;
          nodeIndex = '<p>%s</p>'.format(node.id());
          //nodeIndex = "<table>"+"<th>hello</th>"+"</table>";
          node.qtip({
            content: nodeIndex,
            
            show: {
              event: event.type,
              ready: true
            },

            hide: {
              event: 'mouseout unfocus'
            },

            style: {
              classes: 'qtip-bootstrap',
              tip: {
                width: 16,
                height: 8
              }
            }

          }, event);
        });
      });
    </script>
    <script type="text/javascript">
      function getEdge(source, target) {
        for (var item in net) {
          //if(net[item].id)
          if(net[item]['data']['source'] == source && net[item]['data']['target'] == target) {
            return net[item]['data'];
          }
        }
        return null;
      }
    </script>
    <script type="text/javascript">
      function formatManuscripts(refs) {
        var manuscripts = refs.toString();
        var format = manuscripts.replace('|', ';');
        var word = format.split(';');
        return word;
      }
    </script>
    <script type="text/javascript">
      function getManuscriptsDatabase(ref) {
        if(ref.indexOf('imex')!=-1)
          return 'mex';
        return 'pubmed';
      }
    </script>
    <script type="text/javascript">
      function setUpEdgeTable(edgeInfo) {
        var manuscripts = edgeInfo['Manuscripts'];
        var typeColor = new Object();
        var manuscriptsList = formatManuscripts(manuscripts);

        $('#edgeTypeLabel').text(edgeInfo['type']);
        $('#PathwayName').text(edgeInfo['PathName']);
        $('#Effect').text(edgeInfo['Effect']);
        $('#Manuscripts').empty();

        for (var index in manuscriptsList){
          var manuscript = manuscriptsList[index];
          var dbname = getManuscriptsDatabase(manuscript);
          if(dbname == 'pubmed') {
            $('#Manuscripts').append("<span class='label label-info pubmed '><a href='https://www.ncbi.nlm.nih.gov/pubmed/?term=%s' >Pubmed:%s</a></span>".format(manuscript, manuscript)); 
          } else {
            $('#Manuscripts').append("<span class='label label-info mex'><a href='https://www.ncbi.nlm.nih.gov/pubmed/?term=%s' >%s</a></span>".format(manuscript, manuscript)); 
          }
         }
        
        {% for edge_name in edge_types %}
          var edge_name = "{{ edge_name }}";
          var edge_color = "{{ edge_types[edge_name] }}";
          typeColor[edge_name] = edge_color;
        {% end %}

        $('#edgeTypeLabel').css('background-color', typeColor[edgeInfo['type']]);
      }
    </script>
    <script type="text/javascript">
      function setUpAnalysisTable(nodeId) {
        var keyword = '#' + nodeId;
        var degree = cy.filter("node[id='%s']".format(nodeId)).degree();
        var bc = cy.$().bc().betweenness(keyword);
        var cc = cy.$().cc({ root: keyword });
        var dc = cy.$().dc({ root: keyword }).degree;
        $('#degree').text(degree);
        $('#node_bc').text(bc);
        $('#node_cc').text(cc);
        $('#node_dc').text(dc);
      }
    </script>
    <script type="text/javascript">
      function setUpNodeTable(nodeId) {
        $('#gene-title').text(nodeId);
        $("tr#"+nodeId).show();
        $('#UniProtID a').text(nodeId);
      }
    </script>
    <script type="text/javascript">
      function firstNodeClick() {
        $('#Detail-table').show();
        $('#Detail-tips').hide();
        $('#arrow').hide();
        $('#help-text').hide();
        $('#interactTable').hide();
      }
    </script>
    <script type="text/javascript">
    function plotbar(title, xname, xlabel,  data, containerId) {
      var vContainer = echarts.init(document.getElementById(containerId));
      var option = {
          title: {
            text: title
          },
          color: ['#3398DB'],
          tooltip : {
              trigger: 'axis',
              axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                  type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
              }
          },
          toolbox: {
            show: true,  
                    //启用功能，目前支持feature，工具箱自定义功能回调处理  
            feature: {  
                        //辅助线标志  
              mark: {show: true},  
                        //dataZoom，框选区域缩放，自动与存在的dataZoom控件同步，
                  //数据视图，打开数据视图，可设置更多属性,readOnly 默认数据视图为只读(即值为true)，可指定readOnly为false打开编辑功能 
                  restore: {show: true},  
                  //saveAsImage，保存图片（IE8-不支持）,图片类型默认为'png'  
                  saveAsImage: {show: true}  
            }  
          },
          grid: {
              left: '3%',
              right: '10%',
              bottom: '3%',
              containLabel: true
          },
          xAxis : [
              {
                  name : xname,
                  data : xlabel,
                  axisTick: {
                      alignWithLabel: true
                  }
              }
          ],
          yAxis : [
              {
                  type : 'value',
                  name : 'number'
              }
          ],
          series : [
              {
                  type:'bar',
                  barWidth: '60%',
                  data: data
              }
          ]
      };
      vContainer.setOption(option);
    }
  </script>
  <script type="text/javascript">
    function getDegreeDistribute(CytoscapeObject) {
      var degreeDis = new Object();
      var nodes = CytoscapeObject.filter('node');

      for(var i = 0; i < nodes.length ; i++){
        var degree = nodes[i].degree();
        if(degree in degreeDis) {
          degreeDis[degree] += 1;
        } else {
          degreeDis[degree] = 1
        }
      }
      return degreeDis;
    }
  </script>
  <script type="text/javascript">
    function plotDistribute(degreeDis, name, title, xAxis) {
      if (typeof(degreeDis) == 'undefined') {
        return false;
      }
      var xlabel = [];
      var data = [];

      for(var index in degreeDis) {
        xlabel.push(index);
        data.push(degreeDis[index]);
      }

      plotbar(title, xAxis, xlabel, data, name);
    }
  </script>
  <script type="text/javascript">
    function getPathDistribute(CytoscapeObject) {
      var pathdist = new Object();
      var algorithm = CytoscapeObject.elements().floydWarshall();
      var nodes = CytoscapeObject.filter('node');
      
      for(var i = 0; i < nodes.length; i++) {
        var source = '#' + nodes[i].id();
        for(var j = 0; j < nodes.length; j++){
          var target = '#' + nodes[j].id();
          var distance = algorithm.distance(source, target);

          if(distance in pathdist) {
            pathdist[distance] += 1;
          } else {
            pathdist[distance] = 1
          }
        }
      }
      return pathdist;
    }
  </script>
