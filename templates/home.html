<!DOCTYPE html>
<!-- saved from url=(0041)http://v2.bootcss.com/examples/fluid.html -->
<html lang="en">
  <head>
    <base target="_blank" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Vesion</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
    <!-- Le styles -->
    <link href="{{ static_url('css/bootstrap.css') }}" rel="stylesheet">
    <link rel="stylesheet" href="{{ static_url('css/style.css')}}">
    <link rel="stylesheet" href="{{ static_url('css/docs.min.css')}}">
    <link href="{{ static_url('css/bootstrap-responsive.css') }}" rel="stylesheet">
    <link rel="stylesheet" href="{{ static_url('css/bootstrap.icon-large.min.css')}}">
    <link rel="stylesheet" href="{{ static_url('css/vesion.css')}}">
    <link rel="stylesheet" href="{{ static_url('css/cytoscape-context-menus.css')}}">
    <link rel="stylesheet" href="{{ static_url('css/spectrum.css') }}">
    <link rel="stylesheet" href="{{ static_url('css/flat-ui.css')}}">
    <link rel="stylesheet" href="{{ static_url('css/slider.css')}}">
    <link rel="stylesheet" type="text/css" href="{{ static_url('css/jquery.qtip.min.css')}}">
    <link rel="stylesheet" type="text/css" href="{{ static_url('css/jquery.fancybox.min.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ static_url('css/cytoscape.js-panzoom.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ static_url('css/font-awesome.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ static_url('css/loading.css') }}"> 
    <link href="{{ static_url('css/iziModal.min.css')}}" rel="stylesheet" >
    <link href="{{ static_url('css/spinner.css')}}" rel="stylesheet">
    <style type="text/css">
          #custom-search-form {
        margin:0;
        margin-top: 5px;
        padding: 0;
    }
 
    #custom-search-form .search-query {
        padding-right: 3px;
        padding-right: 4px \9;
        padding-left: 3px;
        padding-left: 4px \9;
        /* IE7-8 doesn't have border-radius, so don't indent the padding */
 
        margin-bottom: 0;
        -webkit-border-radius: 3px;
        -moz-border-radius: 3px;
        border-radius: 3px;
    }
 
    #custom-search-form button {
        border: 0;
        background: none;
        /** belows styles are working good */
        padding: 2px 5px;
        margin-top: 2px;
        position: relative;
        left: -28px;
        /* IE7-8 doesn't have border-radius, so don't indent the padding */
        margin-bottom: 0;
        -webkit-border-radius: 3px;
        -moz-border-radius: 3px;
        border-radius: 3px;
    }
 
    .search-query:focus + button {
        z-index: 3;   
    }
    </style>
    <script src="{{ static_url('js/plotly-latest.min.js')}}"></script>
    <script src="{{ static_url('js/jquery.js')}}"></script>
    <script src="{{ static_url('js/bootstrap.min.js')}}"></script>
    <script src="{{ static_url('js/cytoscape.min.js')}}"></script>
    <script src="{{ static_url('js/cy-spread.js') }}"></script>
    <script src="{{ static_url('js/download.js')}}"></script>
    <script src="{{ static_url('js/cytoscape-context-menus.js')}}"></script>
    <script src="{{ static_url('js/spectrum.js') }}"></script>
    <script src="{{ static_url('js/bootstrap-slider.js')}}"></script>
    <script src="{{ static_url('js/site.js')}}"></script>
    <script src="{{ static_url('js/juqery.qtip.min.js')}}"></script>
    <script src="{{ static_url('js/qtip.js')}}"></script>
    <script src="{{ static_url('js/cytoscape-panzoom.js') }}"></script>
    <script type="text/javascript" src="{{ static_url('js/dagre.js') }}"></script>
    <script type="text/javascript" src="{{ static_url('js/cytoscape-dagre.js') }}"></script>
    <script type="text/javascript" src="{{ static_url('js/cytoscape-navigator.js') }}"></script>
    <script src="{{ static_url('js/iziModal.min.js')}}"></script>
    <script src="{{ static_url('js/echarts.min.js') }}"></script>
    <script src="{{ static_url('js/arbor.js') }}"></script>
    <script src="{{ static_url('js/cytoscape-arbor.js') }}"></script>
    <script src="{{ static_url('js/version.js') }}"></script>
    <script src="{{ static_url('js/jquery.fancybox.min.js') }}"></script>
  </head>
  <body style="padding-top:0px">
    <div class="navbar navbar-inverse navbar-fixed-top" style="position: static" >
      <div class="navbar-inner">
        <div class="container-fluid">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="/">PMap</a>
          <div class="nav-collapse collapse">
            <p class="navbar-text pull-right">
              Logged in as <a href="" class="navbar-link">Username</a>
            </p>
            <ul class="nav">
              <li class="active"><a href="/">Home</a></li>
              <li><a href="about">About</a></li>
              <li><a href="contact">Contact</a></li>
              <li class="dropdown">
                <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">Legends <b class="caret"></b></a>
                <ul class="dropdown-menu" >
                  <li>
                    <a data-fancybox data-src="#hidden-content" href="javascript:;">
                      Node legends
                    </a>
                  </li>
                  <li><a data-fancybox href="javascript:void(0)" data-src="#hidden-content2" href="javascript:;">Edge legends</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <h2 id="net" style="display: none"> {{ hello }}</h2>
    <div class="container-fluid" style="padding: 0px 50px 0px 50px">
      <div class="span3 hero-unit bs-example bs-example-tabs" style="margin-left: 0px " id="geneboard">
          <div class="row" style="margin: 0 0 10px 0;">
                <div>
                    <form id="custom-search-form" class="form-search form-horizontal" style="width: 100%">
                        <div class="input-append" style=" width: 100%">
                            <input type="text" class="search-query" placeholder="Search" style="width: 98%;">
                            <button type="submit" class="btn" ><i class="icon-search"></i></button>
                        </div>
                    </form>
                </div>
          </div>

          <ul id="myTab" class="nav nav-tabs">
              <li class="active">
                <a href="#home" data-toggle="tab" id="Nodetab">
                   Node
                </a>
              </li>
              <li><a href="#edge-detail" data-toggle="tab">Edge</a></li>
              <li><a href="#ios" data-toggle="tab">Summary</a></li>
              <li><a href="#jmeter" tabindex="-1" data-toggle="tab">Style</a></li>
            </ul>
            <div id="myTabContent" class="tab-content">
              <div class="tab-pane fade in active" id="home" style="overflow: hidden; border-top: 0px">
                <div id="Detail-tips"">
                  <p id="help-text" class="help-text palette palette-silver">Click on the node or edge on in the network to see more info</p>
                  <img id="arrow" src="{{ static_url('img/turn-right.png')}}">
                </div><!--Detail-tips-->
                <div class="spinner" style="display: none" id="spinnerAbstract">
                  <div class="rect1"></div>
                  <div class="rect2"></div>
                  <div class="rect3"></div>
                  <div class="rect4"></div>
                  <div class="rect5"></div>
                </div>
                <div id="Detail-table" class="table  table-striped table-responsive table-condensed table-hover" style="display: none; " aria-labelledby="li-detail">
  
                  <table style="border: 0">
                    <tbody>
                      <tr></tr>
                      <tr>
                        <td colspan="2" style="border: none"><h3 class="gene-title" id="gene-title">Gene Name</h3></td>
                      </tr>
                      <tr>
                        <td colspan="2" id="geneSummary" class="gene-abstrct-info"></td>
                      </tr>
                      <tr class="Aliases">
                        <th class="gene-attr-info">Aliases</th>
                        <td id="synonyms" class="gene-abstrct-info">-</td>
                      </tr>
                      <tr>
                        <th class="gene-attr-info">Description</th>
                        <td id="descriptionAbstrct" class="gene-abstrct-info">-</td>
                      </tr>
                      <tr>
                        <th class="gene-attr-info">Chromosome Location</th>
                        <td class="gene-abstrct-info" id="localtion">-</td>
                      </tr>
                      <tr>
                        <th class="span4 gene-attr-info">UniProt ID</th>
                        <td id="UniProtID" class="span8 gene-abstrct-info" ><a href="">-</a></td>
                      </tr>
                      <tr>
                        <th class="gene-attr-info">HGNC</th>
                        <td class="hgnc gene-abstrct-info" id="hgnc">-</td>
                      </tr>
                      <tr class="expandable">
                        <th class="gene-attr-info">Ensembl</th>
                        <td id="Ensembl" class="gene-abstrct-info"><p>-</p></td>
                      </tr>
                      <tr>
                        <th class="gene-attr-info">Entrez Gene</th>
                        <td id="Atlas" class="gene-abstrct-info">-</td>
                      </tr>
                    </tbody>
                  </table>
                </div><!--Deatil-table-->
              </div><!--first home-->

              <div class="tab-pane fade" id="ios" style="overflow: hidden; border-top: 0px">
                <div id="statistics" class="table  table-striped table-responsive table-condensed table-hover">
                  <table style="border: 0">
                    <tbody>
                      <tr></tr>
                      <tr>
                        <th colspan="2" style="border: none">
                          <h3 class="gene-title">Statistics</h3>
                        </th>
                      </tr>
                      <tr>
                        <th class="gene-attr-info span6">Total Nodes</th>
                        <td class="gene-abstrct-info span6" id="totalNodes" >-</td>
                      </tr>
                      <tr>
                        <th class="gene-attr-info">Total Edges</th>
                        <td class="gene-abstrct-info" id="totalEdges">-</td>
                      </tr>
                      <tr>
                        <th class="gene-attr-info">Degree</th>
                        <td class="gene-abstrct-info" id="totalDegree">-</td>
                      </tr>
                      <tr>
                        <th class="gene-attr-info">Degree in</th>
                        <td class="gene-abstrct-info" id="totalDegreeIn">-</td>
                      </tr>
                      <tr>
                        <th class="gene-attr-info ">Degree out</th>
                        <td class="gene-abstrct-info" id="totalDegreeOut">-</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <!--statistics-->
                <div id="interaction" class="table  table-striped table-responsive table-condensed table-hover">
                  <table style="border: 0" id="interactionTable">
                    <tbody>
                      <tr></tr>
                      <tr>
                        <th colspan="2" style="border: none">
                          <h3 class="gene-title">Interaction types</h3>
                        </th>
                      </tr>
                      <tr id="row-controls-state-change-of" class="edge-type-off">
                        <td class="span1 gene-abstrct-info"  id="controls-state-change-of-count">
                            439
                        </td>
                        <td class="span11">
                            <span class="itx-type-on-off label controls-state-change-of" data-itx-type="controls-state-change-of">controls state change <span class="fui-cross-16"></span></span>
                        </td>
                      </tr>
                      <tr id="row-controls-expression-of" class="edge-type-off">
                          <td id="controls-expression-of-count" class="span1 gene-abstrct-info">
                              395
                          </td>
                          <td>
                              <span class="itx-type-on-off label controls-expression-of" data-itx-type="controls-expression-of" st>controls expression <span class="fui-cross-16"></span></span>
                          </td>
                      </tr>
                      <tr id="row-catalysis-precedes" class="edge-type-off">
                          <td  class="gene-abstrct-info" id="catalysis-precedes-count" class="span1 gene-abstrct-info">
                              11
                          </td>
                          <td>
                              <span class="itx-type-on-off label catalysis-precedes" data-itx-type="catalysis-precedes">consecutive catalysis <span class="fui-cross-16"></span></span>
                          </td>
                      </tr>
                      <tr id="row-controls-phosphorylation-of" class="edge-type-off">
                          <td id="controls-phosphorylation-of-count" class="span1 gene-abstrct-info">
                              37
                          </td>
                          <td>
                              <span class="itx-type-on-off label controls-phosphorylation-of" data-itx-type="controls-phosphorylation-of">controls phosphorylation <span class="fui-cross-16"></span></span>
                          </td>
                      </tr>
                      <tr id="row-controls-transport-of" class="edge-type-off">
                          <td id="controls-transport-of-count" class="span1 gene-abstrct-info">
                              2
                          </td>
                          <td>
                              <span class="itx-type-on-off label controls-transport-of" data-itx-type="controls-transport-of">controls transport <span class="fui-cross-16"></span></span>
                          </td>
                      </tr>
                      <tr id="row-interacts-with" class="edge-type-off">
                          <td id="interacts-with-count" class="span1 gene-abstrct-info">
                              0
                          </td>
                          <td>
                              <span class="itx-type-on-off label in-complex-with" data-itx-type="in-complex-with">interacts with<span class="fui-cross-16"></span></span>
                          </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <!---edge-type-->
                <div id="less-more-selector" class="table  table-striped table-responsive table-condensed table-hover">
                  <table>
                    <tbody>
                      <tr></tr>
                      <tr>
                        <th colspan="4" style="border: none" >
                          <h3 class="gene-title">Show less/more nodes</h3>
                        </th>
                      </tr>
                      <tr></tr>
                      <tr>
                        <td style="border: none"><i class="icon-minus"></i></td>
                        <th style="border: none">
                          <input id="ex3" data-slider-id='ex1Slider' type="text" data-slider-min="0" data-slider-max="3" data-slider-step="1" data-slider-value="3"/>
                        </th>
                        <td style="border: none"><i class="icon-plus"></i></td>
                      </tr>
                    </tbody>
                  </table>
                </div><!--more or less-->
              </div><!--ios-->
              <div class="tab-pane fade" id="edge-detail">
                <div id="edge-type" class="table table-bordered table-striped table-responsive table-condensed table-hover">
                  <table style="border: 0" id="interactTable">
                    <tbody>
                      <tr>
                        <td colspan="2" ><h3 id="edge-title">Edge-Edge</h3></td>
                      </tr>
                      <tr>
                        <th class="span6">Interactions</th>
                        <td id="interactions" class="span6">
                          <span class="label label-info" id="edgeTypeLabel">null</span>
                        </td>
                      </tr>
                      <tr>
                        <th>Pathway Name</th>
                        <td id="PathwayName"><span class="label label-info">null</span></td>
                      </tr>
                      <tr>
                        <th>Manuscripts</th>
                        <td id="Manuscripts">null</td>
                      </tr>
                      <tr>
                        <th>Effect</th>
                        <td id="Effect">null</td>
                      </tr>
                    </tbody>
                  </table>
                </div><!---edge Type-->
              </div>

              <div class="tab-pane fade" id="jmeter" style="overflow: hidden; border-top: 0px">
                <div id="color-picker" class="table table-striped table-condensed table-striped table-responsive table-hover" style="height: 500px">
                  <table id = 'node-style' style="width: 100%">
                    <tbody>
                      <tr></tr>
                      <tr>
                        <td colspan="4" style="border: none;">
                          <h3 class="gene-title">Node style</h3>
                        </td>
                      </tr>
                      <tr>
                        <th class="span2 gene-attr-info" style="line-height: 50px">Shape</th>
                        <td class="span3" style="line-height: 50px">
                          <img src="{{ static_url('img/ellipse.png')}}" id="imgShape">
                        </td>
                        <td class="span3 gene-abstrct-info" style="line-height: 50px" id="shapeText">Ellipse</td>
                        <td class="span4"><!-- Single button -->
                          <!-- Inverted skin  -->
                            <div class="btn-group"">
                              <button class="btn " type="button" data-toggle="dropdown" style="background-color: '#f9f9f9'">
                                <span class="icon-cog"></span>
                              </button>
                              <ul class="dropdown-menu " role="menu" id="Shape" style="z-index: 100">
                                <li><a  href="javascript:void(0)" value="ellipse">Ellipse</a></li>
                                <li><a  href="javascript:void(0)" value="rectangle">Rectangle</a></li>
                                <li><a  href="javascript:void(0)" value="triangle">Triangle</a></li>
                                <li><a  href="javascript:void(0)" value="pentagon">Pentagon</a></li>
                                <li><a  href="javascript:void(0)" value="hexgon">Hexgon</a></li>
                                <li><a  href="javascript:void(0)" value="heptagon">Heptagon</a></li>
                                <li><a  href="javascript:void(0)" value="octagon">Octagon</a></li>
                                <li><a  href="javascript:void(0)" value="star">Star</a></li></li>
                                <li><a  href="javascript:void(0)" value= "diamond">Diamond</a></li>
                                <li><a  href="javascript:void(0)" value="vee">Vee</a></li>
                                <li><a  href="javascript:void(0)" value="rhomboid">Rhomboid</a></li>
                              </ul>
                            </div>
                        </td>
                      </tr>
                      <tr>
                        <th style="line-height: 50px" class="gene-attr-info">Color</th>
                        <td>
                          <div style="background-color: black;color: black; height: 48px"  id="colorBoard"> hllow</div>
                        </td>
                        <td style="line-height: 50px" id="colorCode" class="gene-abstrct-info">
                          #000000
                        </td>
                        <td>
                          <div class="btn-group" ">
                            <a  href="javascript:void(0)" class="btn .btn-default icon-pencil" id="nodeColorPicker"><span class="icon-pencil"></span></a>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <th class="gene-attr-info">Size</th>
                        <td colspan="3">
                         <input id="ex1" data-slider-id='ex1Slider' type="text" data-slider-min="20" data-slider-max="100" data-slider-step="1" data-slider-value="30"/>
                        </td>
                      </tr>
                      <tr>
                        <th colspan="4"><h3 class="gene-title">Edge style</h3></th>
                      </tr>
                      <tr >
                        <th style="line-height: 50px" class="gene-attr-info">Style</th>
                        <td style="line-height: 50px">
                          <img src=" {{ static_url('img/solid.png') }}" id="imgLine">
                        </td>
                        <td style="line-height: 50px" id="lineText" class="gene-abstrct-info">Solid</td>
                        <td>
                            <div class="btn-group"">
                              <button class="btn " type="button" data-toggle="dropdown" style="background-color: '#f9f9f9'">
                                <span class="icon-cog"></span>
                              </button>
                              <ul class="dropdown-menu " role="menu" id="lineStyle">
                                <li><a href="javascript:void(0)"  value="solid">Solid</a></li>
                                <li><a href="javascript:void(0)"  value="dotted">Dotted</a></li>
                                <li><a href="javascript:void(0)" value="dashed">Dashed</a></li>
                              </ul>
                            </div>
                        </td>
                      </tr>
                      <tr>
                        <th style="line-height: 50px" class="gene-attr-info">Color</th>
                        <td style="line-height: 50px">
                          <div style="background-color: black;color: black; height: 48px"  id="lineColorBoard"> hllow</div>
                        </td>
                        <td style="line-height: 50px" id="lineColorCode" class="gene-abstrct-info">#000000</td>
                        <td>
                          <div class="btn-group" ">
                            <a href="" class="btn .btn-default icon-pencil" id="edgeColorPicker"><span class="icon-pencil"></span></a>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <th class="gene-attr-info" colspan="2">Source shape</th>
                        <td colspan="2">
                          <select class="selectpicker dropup" id="source-shape" data-live-search="true">
                              <option value="none">None</option>
                              <option value="triangle-tee">Triangle-tee</option>
                              <option value="triangle-backcurve">Triangle-backcurve</option>
                              <option value="vee">Vee<span class="icon-cog"></span></option>
                              <option value="tee">Tee</option>
                              <option value="square">Square</option>
                              <option value="circle">Circle</option>
                              <option value="diamond">Diamond</option>
                              <option value="triangle">Triangle</option>
                          </select>
                        </td>
                      </tr>
                      <tr>
                        <th class="gene-attr-info" colspan="2">Target shape</th>
                        <td colspan="2">
                          <select class="selectpicker dropup" id="target-shape">
                              <option value="none">None</option>
                              <option value="triangle-tee">Triangle-tee</option>
                              <option value="triangle-backcurve">Triangle-backcurve</option>
                              <option value="vee"><a class="icon-cog">Vee</a><span ></span></option>
                              <option value="tee">Tee</option>
                              <option value="square">Square</option>
                              <option value="circle">Circle</option>
                              <option value="diamond">Diamond</option>
                              <option value="triangle">Triangle</option>
                          </select>
                        </td>
                      </tr>
                      <tr>
                        <th style="line-height: 50px" class="gene-attr-info" colspan="2">Size</th>
                        <td colspan="2">
                            <input id="ex2" data-slider-id='ex1Slider' type="text" data-slider-min="1" data-slider-max="20" data-slider-step="1" data-slider-value="4"/>
                        </td>
                      </tr>
                    </tbody>              
                  </table>
                </div><!--#color-picker-->
              </div>
            </div><!--tab content-->
      </div><!--span4-->
      
      <div class="hero-unit span9" style="margin-left: 0px;   float: right;" id="vboard">
            <div class="btn-toolbar" role="toolbar">
            <div class="btn-group">
              <button class="btn btn-default" id ="btn-zoom-in" ><a title="Zoom in" class="icon-zoom-in icon-large"></a></button>
              <button class="btn btn-default" id ="btn-zoom-out"><a 
              title="Zoom Out" class ="icon-zoom-out icon-large"></a></button>
              <button class="btn btn-default" id ="btn-save" ><a title="Save" class="icon-camera icon-large"></a></button> 
              <button class="btn btn-default" id="btn-showall"><a title="Showall" class="icon-eye-open icon-large"></a></button>
              <button class="btn btn-default" id ="btn-hide-node" ><a title="Hideall" class="icon-eye-close icon-large"></a></button>
              <button class="btn btn-default" id="btn-screen-fit"><a title="Resize" class="icon-resize-full icon-large"></a></button>
              <button class="btn btn-default" id = "btn-screen-full"><a title="Screen full" class="icon-fullscreen icon-large"></a></button>
              <button class="btn btn-default" id="btn-analysis"><a title="Analysis" class="icon-stats icon-large"></a></button>
              <div class="btn-group">
                <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                  <i class="icon-list icon-large" title="Layouts"></i>
                </button>
                <ul class="dropdown-menu" id='Menu'>
                  <li><a id="Random"       value="random">Random</a></li>
                  <li><a id="Grid"         value="grid">Grid</a></li>
                  <li><a id="Circle"       value="circle">Circle</a></li>
                  <li><a id="Concentic"    value="concentric">Concentic</a></li>
                  <li><a id="BreadthFirst" value="breadthfirst">Breadth First</a></li>
                  <li><a id="Cose"         value="cose">Cose</a></li>
                  <li><a id="Preset"       value="spread">Preset</a></li>
                  <li><a id="Dagre"        value="dagre">Dagre</a>
                   <li><a id="Arbor"        value="arbor">Arbor</a>
                </ul>
              </div><!--btn-group-->
            </div>                    
            </div><!--.btn-toolbar-->
            <div id="cy" style="height: 500px; overflow: auto;overflow-x:auto"><p></p></div> 
          </div><!--.span8-->
      <!--<div class="span8">100</div>-->
    </div>

    <div class="container-fluid" style="padding: 0px 50px 0px 50px">
      <div class="bs-example bs-example-tabs row-fluid" data-example-id="togglable-tabs" style="margin-right: auto;margin-left: auto;">
         <ul id="bottomTabs" class="nav nav-tabs">
           <li class="active">
             <a href="#gene" data-toggle="tab">
                Gene Detail
             </a>
           </li>
          <li>
            <a href="#disease" data-toggle="tab">Disease Detail</a>
          </li>
          <li>
            <a href="#drug" data-toggle="tab">Drug Detail</a>
          </li>
           <li><a href="#pathway"  data-toggle="tab">Pathway Detail</a></li>
           <li><a href="#analysis" data-toggle="tab">Network Analysis</a></li>
           <li><a href="#expression" data-toggle="tab">Expression</a></li>
         </ul>
         <div id="myTabContent" class="tab-content">
          <div class="tab-pane fade in active" id="gene">
            <div>
              <p id="help-text-detail" class="help-text palette palette-silver">Click on the node or edge on in the network to see more information.</p>
            </div><!--Detail-tips-->
            <div class="spinner" id="spinnerGene" style="display: none">
              <div class="rect1"></div>
              <div class="rect2"></div>
              <div class="rect3"></div>
              <div class="rect4"></div>
              <div class="rect5"></div>
            </div>
            <table class="table table-striped table-bordered table-responsive table-hover" id="contentTable" style="display: none">
               <tbody>
                <tr>
                  <th class="gene-attr-info">UniProtID</th>
                  <td class="gene-abstrct-info" id="UniProtIDetail">-</th>
                </tr>
                <tr>
                  <th class="gene-attr-info">HGNC</th>
                  <td class="gene-abstrct-info" id="HGNCDetail">-</th>
                </tr>
                <tr>
                  <th class="gene-attr-info">Gene Type</th>
                  <td class="gene-abstrct-info" id="geneType">-</td>
                </tr>
                <tr>
                  <th class="span2 gene-attr-info">Synonyms</th>
                  <td class="gene-abstrct-info" id="synonymsDetail" class="span10">-</th>
                </tr>
                <tr>
                  <th class="gene-attr-info">Entrez Gene</th>
                  <td class="gene-abstrct-info" id="entrezDetail">-</td>
                </tr>
                <tr>
                  <th class="gene-attr-info">Ensembl</th>
                  <td class="gene-abstrct-info" id="ensemblDetail">-</th>
                </tr>
                <tr>
                  <th class="gene-attr-info">Description</th>
                  <td class="gene-abstrct-info" id="description">-</td>
                </tr>
                <tr>
                  <th class="gene-attr-info">Pubmed</th>
                  <td class="gene-abstrct-info" id="Pubmed"></td>
                </tr>
                <tr>
                  <th class="gene-attr-info">Gene Location </th>
                  <td class="gene-abstrct-info"><a id="chr"></a><br><a id="band"></a></td>
                </tr>
                <tr>
                  <th colspan="2">
                    <b>Summary:</b><p id="summaryDetail" class="gene-abstrct-info"></p>
                  </th>
                </tr>
               </tbody>
             </table>
          </div>
          <div class="tab-pane fade" id="disease">
              <div class="spinner" id="spinnerDisease">
                <div class="rect1"></div>
                <div class="rect2"></div>
                <div class="rect3"></div>
                <div class="rect4"></div>
                <div class="rect5"></div>
              </div>
            <div>
              <p id="help-text-detail-disease" class="help-text palette palette-silver">Click on the node or edge on in the network to see more information.</p>
            </div><!--Detail-tips-->
              <table class="table table-striped table-bordered table-responsive table-hover" id="diseaseTable"> 
                <tbody>
                  <tr>
                    <th class="span2">Source</th>
                    <th class="span10">Disease </th>
                  </tr>
                </tbody>
              </table>
          </div>
           <div class="tab-pane fade" id="drug">
                <p id="help-text-detail-drug" class="help-text palette palette-silver">Click on the node or edge on in the network to see more information.</p>
                <div class="spinner" id="spinnerDetail">
                  <div class="rect1"></div>
                  <div class="rect2"></div>
                  <div class="rect3"></div>
                  <div class="rect4"></div>
                  <div class="rect5"></div>
                </div>
                <ul id="drugList">
                </ul>
           </div>
           <div class="tab-pane fade" id="jmeter1">
             <div class="table table-striped table-bordered table-responsive table-hover">
               <table id="drugTable">
                 <tr id="drugtableTitle">
                   <th class="span1">Entry</th>
                   <th class="span2">Name</th>
                   <th class="span6">Description</th>
                   <th class="span1">Category</th>
                   <th class="span1">Pathway</th>
                   <th class="span1">Drug</th>
                 </tr>
               </table>
             </div>
           </div>
           <div class="tab-pane fade" id="analysis">
             <table class="table table-striped table-bordered table-responsive table-hover">
               <tbody>
                <tr>
                 <th>Degree</th>
                 <th>Degree Centrality</th>
                 <th>Closeness Centrality</th>
                 <th>Betweenness Centrality</th>
                </tr>
                <tr>
                  <th id="degree"  class="gene-abstrct-info">null</th>
                  <th id="node_dc" class="gene-abstrct-info">null</th>
                  <th id="node_cc" class="gene-abstrct-info">null</th>
                  <th id="node_bc" class="gene-abstrct-info">null</th>
                </tr>
               </tbody>
             </table>
             <table>
               <tbody>
                 <tr></tr>
                 <tr>
                   <th><div id="degreeDis" style="height:400px;" ></div></th>
                   <th><div id="shortpathDis"  style="height:400px;" ></div></th>
                 </tr>
               </tbody>
             </table>
           </div>
           <div class="tab-pane fade" id="pathway">
              
                <div class="spinner" id="spinnerPathway" style="display: none">
                  <div class="rect1"></div>
                  <div class="rect2"></div>
                  <div class="rect3"></div>
                  <div class="rect4"></div>
                  <div class="rect5"></div>
              </div>
              <div>
                <p id="help-text-detail-pathway" class="help-text palette palette-silver">Click on the node or edge on in the network to see more information.</p>
              </div><!--Detail-tips-->

              <table class="table table-striped table-bordered table-responsive table-hover" id="pathwayTable" style="display: none">
                <tbody>
                  <tr>
                    <th>SuperPathway Name</th>
                    <th>Genes Count</th>
                    <th>Relevance Score</th>
                  </tr>
                </tbody>
              </table>
            </div>
           <div class="tab-pane fade" id="expression">
             <table class="table table-striped table-bordered table-responsive table-hover">
               <tbody>
                 <tr>
                    <th>mRNA expression in normal human tissues from GTEx, Illumina, BioGPS, and CGAP SAGE for <b id="curgene">A2M</b> Gene</th>
                  </tr>
                  <tr>
                    <th><img src="" id="expImg"></th>
                  </tr>
               </tbody>
             </table>
           </div>
          </div>
      </div><!--row-->

      <div id="modal" class="iziModal isFullscreen">
        <div class="iziModal-header iziModal-noSubtitle" style="background: rgb(136, 160, 185);padding-right: 70px">
          <h2 class="iziModal-header-title">Fullscreen of network</h2>
          <div class="iziModal-header-buttons">
            <button class="iziModal-button iziModal-button-close" data-izimodal-close="" data-izimodal-transitionout="bounceOutDown" id="close-btn"></button>
          </div>
        </div>
        <div class="iziModal-wrap" >
          <div class="iziModal-content" id="cy2" style="height: 600px; width: 100%">
          </div>
        </div>
      </div> 

      <div style="display: none;" id="hidden-content" class="sbgn-frame">
        <h3 class="gene-title">Node Legends</h3>
        <img src="{{ static_url('img/legend-node.png') }}">
      </div>

      <div style="display: none;" id="hidden-content2" class="sbgn-frame">
        <h3 class="gene-title">Edge Legends</h3>
        <img src="{{ static_url('img/legend-edge.png') }}">
      </div>
          
      <hr> 
      <footer>
        <p>© Harbin Institute of Technology 2017</p>
      </footer>
    </div><!--/.fluid-container-->
    <script type="text/javascript">
        function DoAjax(nodeId){
            $.ajax({
                url:"/gene",//调用的是这个url对应的那个Handler
                type:"get",//get方法
                data:{keyword: nodeId},//要往服务器传递的数据
                beforeSend: function () {
                    $("#spinnerAbstract").show();
                    $('#spinnerGene').show();
                    $('#Detail-table').hide();
                    $('#contentTable').hide();
                    $('#help-text-detail').hide();
                  },
                success:function(arg){//成功从服务端获取到值，参数arg表示从服务端的Handler获取的数据
                    var obj = jQuery.parseJSON(arg);//获取的数据一般为json格式，用这个方法来解析数据

                    if(obj.data[1].length == 0) {
                      $('#geneSummary').hide();
                    } else {
                       $('#geneSummary').show();
                       $('#geneSummary').text(obj.data[1]);
                    }

                    if(obj.data[0]['synonyms'] == '-') {
                      $('#Aliases').hide();
                    } else {
                      $('#Aliases').show();
                      $('#synonyms').text(obj.data[0]['synonyms']);
                    }

                    $('#help-text-detail').text("Gene Detail Information of " + nodeId);
                    $('#UniProtIDetail').text(nodeId);
                    $('#hgnc').text(obj.data[0]['HGNC']);
                    $('#HGNCDetail').text(obj.data[0]['HGNC']);
                    $('#Atlas').text(obj.data[0]['entrez']);
                    $('#synonyms').text(obj.data[0]['synonyms']);
                    $('#synonymsDetail').text(obj.data[0]['synonyms']);
                    $('#geneType').text(obj.data[0]['type']);
                    $('#entrezDetail').text(obj.data[0]['entrez']);
                    $('#description').text(obj.data[0]['description']);
                    $('#descriptionAbstrct').text(obj.data[0]['description']);
                    $('#chr').text('Chr:' + obj.data[0]['chr']);
                    $('#localtion').text(obj.data[0]['chromosome_band']);
                    $('#band').text('Chromosome_band:' + obj.data[0]['chromosome_band']);
                    $('#summaryDetail').text(obj.data[1]);
                    $('#Ensembl').text(obj.data[2]);
                    $('#ensemblDetail').text(obj.data[2]);
                    setUpPebMedids(obj.data[3]);
                    setUpPathwayTable(obj.data[4], nodeId);
                },

                complete: function () {
                  $("#spinnerAbstract").hide();
                  $('#spinnerGene').hide();
                  $('#Detail-table').show();
                  $('#contentTable').show();
                  $('#help-text-detail').show();
                  $('#help-text-detail-disease').show();
                },

                error:function(){//获取失败
                    console.log("failed");
                }
            });
        }
    </script>
    <script type="text/javascript">
        function loadDrug(nodeId){
            $.ajax({
                url:"/test",//调用的是这个url对应的那个Handler
                type:"GET",//get方法
                data:{keyword: nodeId},//要往服务器传递的数据
                beforeSend: function () {
                    $('#drugList').children().filter('li').remove();
                    $("#diseaseTable  tr:not(:first)").html(""); 
                    $("#diseaseTable").hide();
                    $('#pathwayTable').hide();
                    $("#spinnerDetail").show();
                    $('#spinnerPathway').show();
                    $('#spinnerDisease').show();
                    $('#help-text-detail-disease').hide();
                    $('#help-text-detail-pathway').hide();
                    
                  },
                success:function(arg){//成功从服务端获取到值，参数arg表示从服务端的Handler获取的数据
                    var obj = jQuery.parseJSON(arg);//获取的数据一般为json格式，用这个方法来解析数据
                    var drugs = obj.data[0];
                    var diseases = obj.data[1];
                    console.log(diseases);
                    setUpDiseaseTable(diseases, nodeId);
                    setUpDrugTable(drugs, nodeId);
                },

                complete: function () {
                  $("#spinnerDetail").hide();
                  $('#spinnerPathway').hide();
                  $('#spinnerDisease').hide();
                  $("#diseaseTable").show();
                  $('#help-text-detail-disease').show();
                  $('#help-text-detail-pathway').show();
                },

                error:function(){//获取失败
                    console.log("failed");
                }
            });
        }
    </script>
    <script type="text/javascript">
      /*
      Define the global variables
      */
      var cy = new Object();
      var clickMenu = new Object();
      var nodeColor = '#000000';
      var tableDetail = new Object();
      var opt = new Object();
      var curOption = 0;
    </script>
    <script>
    $(function() {
      net = JSON.parse($('#net').text());
      cy = cytoscape({
        container: document.getElementById('cy'), 
        boxSelectionEnabled: true,
        //autounselectify: true,
        layout: {
            name: 'arbor',
            refresh: .6,

          },
          
          style: [
            {
              selector: 'node',
              style: {
                'font-size': 2,
                'background-color': '#96d9f6',//#96d9f6
                'size': 20,
                'content': 'data(id)',
                "text-valign": "center",
                "text-halign": "center",
                "faveColor": "#6fb1fc"/*
                "width": "mapData(score, 0, 0.006769776522008331, 20, 60)",
                "height": "mapData(score, 0, 0.006769776522008331, 20, 60)",
                "text-outline-color": "#555",
                "text-outline-width": "2px",
                "color": "#fff",
                "overlay-padding": "6px",
                "z-index": "10"*/
              }
            },

            {
              selector: "edge",
              style : {
                'curve-style': 'bezier',
                'target-arrow-shape': 'triangle-tee',
                //'haystack-radius': 0.5,
                'opacity': 1,
                'line-color': "#ADADAD",
                'width': "mapData(weight, 0, 1, 1, 8)",
                'overlay-padding': "3px"
              }
            },
            {
              selector:  "edge[type = 'interacts-with']",
              style: {
                'line-color': '#5e3e41'
              }
            },
           
            {
              selector:  "edge[type = 'controls-phosphorylation-of']",
              style: {
                'line-color': '#17ccd3'
              }
            },

            {
              selector:  "edge[type = 'controls-state-change-of']",
              style: {
                'line-color': '#1450b9'
              }
            },

            {
              selector:  "edge[type = 'TBRR']",
              style: {
                'line-color': '#20C3C9'
              }
            },

            {
              selector:  "edge[type = 'ER']",
              style: {
                'line-color': '#C8AA64'
              }
            },
             {
               "selector": "node:selected",
                "style": {
                    "border-width": "6px",
                    "border-color": "#AAD8FF",
                    "border-opacity": "0.5",
                    "background-color": "#77828C",
                    "text-outline-color": "#77828C"
              }
            }
            ,
            {
              selector: 'edge:selected',
              style: {
                'background-color': '#000000',
                'line-color': 'black',
                'target-arrow-color': 'black',
                'source-arrow-color': 'black',
                'opacity': 3
              }
            }
          ], 
    
          elements: net,        
      });//cy  
        // cy panzoom plugin 
      cy.panzoom({});
      setUpRightMenu(cy);
      setUpSummaryInit(cy);
      cy.on('tap', function(event){
        var evtTarget = event.cyTarget;
        $('#Detail').addClass('active in');
        if( evtTarget == cy ){
            cy.trigger('boxstart');
        } else {
  
         if (event.cyTarget.isNode()) {
            var node = event.cyTarget;
            nodeIndex = '#' + node.id();
            //cy.zoom(2);
            //cy.center(nodeIndex);

          //$('#myTab li:eq(0) a').tab('show');
           // $('#bottomTabs li:eq(0) a').tab('show');
            $('#myTab li:eq(0) a').text('Node');
            firstNodeClick();
            setUpNodeTable(node.id());
            setUpAnalysisTable(node.id());
            setUpFrameUrl(node.id());
          }//end of event.cyTarget.isNode()

        if (event.cyTarget.isEdge()) {
            $('#Detail-table').hide();
            //$('#myTab li:eq(0) a').text('Ed');
            //$('#myTab li:eq(1) a').tab('show');
            var edge = event.cyTarget;
            var source = edge.source();
            var target = edge.target();
            $('#edge-title').text(source.id() + '-' + target.id());
            var edgeInfo = getEdge(source.id(), target.id());
            $('#interactTable').show();
            setUpEdgeTable(edgeInfo);
          }
        }//end-else
      });//end-cy.on

      /**cy.on('mouseover', 'node', function(event) {
        var node = event.cyTarget;
        nodeIndex = '<p>%s</p>HGNC:7<br>OMIM:103950<br>EntrezID:2'.format(node.id());

        node.qtip({
          content: nodeIndex,
          
          show: {
            event: event.type,
            ready: true
          },

          hide: {
            event: 'mouseout unfocus'
          },

          style: {
            classes: 'qtip-bootstrap',
            tip: {
              width: 16,
              height: 8
            }
          }
      }, event); });**/

      cy.on('boxselect', function(event) {
      });
    })
    </script>
    <script type="text/javascript">
      $(function() {
        $('#modal').iziModal({
          onClosed: function(modal) {
            $('.cy-panzoom').show();
          }
        });
      })
    </script>
    <script type="text/javascript">
      $(document).ready(function(){
        if( $(window).width() > 1440) {
           $('#geneboard').css('width', "25%");
           $('#vboard').css('width', "65%");

        } else {
           $('#geneboard').css('width', "30%");
           $('#vboard').css('width', "60%");
        }
        var halfscreen = $(window).width() * 0.45;
        $('#degreeDis').css('width', halfscreen + "px");
        $('#shortpathDis').css('width', halfscreen + "px");
    })
    </script>
    <script type="text/javascript">
      $('#btn-analysis').click(function() {
        $('#bottomTabs li:eq(4) a').tab('show');
        var degreeDis =  getDegreeDistribute(cy);
        plotDistribute(degreeDis, 'degreeDis', 'Degree distribution', 'Degree');
        var pathDis = getPathDistribute(cy);
        plotDistribute(pathDis, 'shortpathDis', 'Shortest path distribution', 'Path length');
      });
    </script>
   <!-- <script src="{{ static_url('js/heatmap.js')}}"></script>-->
    <script>
      $(function(){
        {% for edge_name in edge_types %}
          var edge_name = "{{ edge_name }}";
          var edge_color = "{{ edge_types[edge_name] }}";
          var edge = cy.filter("edge[type = \'" + edge_name + "\']");
          $('#row-' + edge_name).show();
          $('#' + edge_name + '-count').text(edge.length);
          $('#' + edge_name + '-btn').css('background-color', edge_color);
        {% end %}
        $('#ex1').slider({
           formatter: function(value) {
             return 'Current value: ' + value;
           }
        });
        $('#ex2').slider({
           formatter: function(value) {
             return 'Current value: ' + value;
           }
        });  
        $('#ex3').slider({
           formatter: function(value) {
             return 'Current value: ' + value;
           }
        }); 
      });
    </script>
    <script>
      function selectAllOfTheSameType(ele) {
        cy.elements().unselect();
        if(ele.isNode()) {
          cy.nodes().select();
        }
        else if(ele.isEdge()) {
          cy.edges().select();
        }
      }
    </script>
    <script>
      $('#btn-screen-fit').click(function() {
        cy.fit();
      });
    </script>
    <script>
      $('#btn-save').click(function() {
        var png64 = cy.png({
          bg : "#ffffff"
        });
        download(png64, 'net.png', 'image/png');
      });
    </script>
    <script>
      $('#btn-zoom-in').click(function () {
       var zoom =  cy.zoom()
        zoom = zoom  + 0.05;
        if ( zoom > 9 ){
          zoom = 9;
        }
        cy.zoom({
          level: zoom
        });
      });
    </script>
    <script>
      $('#btn-zoom-out').click(function () {
        var zoom = cy.zoom();
        zoom = zoom - 0.05;
        if( zoom < cy.minZoom()){
          zoom = 0.05;
        }
        cy.zoom({
          level: zoom
        });
      });
    </script>
    <script>
      $('#Menu li a').click(function(){
        var layoutName = $(this).attr('value');
        var layout = cy.makeLayout({
          name : layoutName
        });
        layout.run();
      });
    </script>
    <script>
      $('#leftControlMenu li a').click(function(e) {
        $('#help-text').hide();
        $('help-text').css('margin-top: 0px');
        $('#arrow').hide();
        $('#Deatil-table').show();
        e.preventDefault();
        $(this).tab('show');
      })
    </script>
    <script>
      $("#btn-hide-node").click(function(){
        cy.$(':selected').hide();

      })
      $('#btn-showall').click(function() {
        cy.$('node').show();
        cy.$('edge').show();
      })
    </script>
    <script>
      $('a.icon-remove').click(function() {
        var edgeType = $(this).attr('value');
        $('tr#' + edgeType).remove();
        var filter  = "edge[type = \'" + edgeType + "\']";
        var selector = cy.filter(filter);
        selector.hide();
      });
    </script>
    <script>
      $('a.-plus').click(function() {
        var edgeType = $(this).attr('value');
        $('tr#' + edgeType).remove();
        var filter  = "edge[type = \'" + edgeType + "\']";
        var selector = cy.filter(filter);
        selector.show();
      });
    </script>

    <script>
      $('#nodeColorPicker').spectrum({
            color: "#000000#",
            showInput: true,
            className: "full-spectrum",
            showInitial: true,
            showPalette: true,
            showSelectionPalette: true,
            maxSelectionSize: 10,
            preferredFormat: "hex",
            localStorageKey: "spectrum.demo",
            move: function (color) {
              nodeColor = color.toHexString();
              $('#colorCode').text(nodeColor);
              $('#colorBoard').css("background-color", nodeColor);
              $('#colorBoard').css('color', nodeColor);
              cy.$('node:selected').style('background-color', nodeColor);
                
            },
            show: function (color) {
              nodeColor = color.toHexString();
              $('#colorCode').text(nodeColor);
            },
            beforeShow: function () {
            
            },
            hide: function () {
            
            },
            change: function(color) {
              nodeColor = color.toHexString();
              $('#colorCode').text(nodeColor);
              $('#colorBoard').css("background-color", nodeColor);
              $('#colorBoard').css('color', nodeColor);
            },
            palette: [
                ["rgb(0, 0, 0)", "rgb(67, 67, 67)", "rgb(102, 102, 102)",
                "rgb(204, 204, 204)", "rgb(217, 217, 217)","rgb(255, 255, 255)"],
                ["rgb(152, 0, 0)", "rgb(255, 0, 0)", "rgb(255, 153, 0)", "rgb(255, 255, 0)", "rgb(0, 255, 0)",
                "rgb(0, 255, 255)", "rgb(74, 134, 232)", "rgb(0, 0, 255)", "rgb(153, 0, 255)", "rgb(255, 0, 255)"], 
                ["rgb(230, 184, 175)", "rgb(244, 204, 204)", "rgb(252, 229, 205)", "rgb(255, 242, 204)", "rgb(217, 234, 211)", 
                "rgb(208, 224, 227)", "rgb(201, 218, 248)", "rgb(207, 226, 243)", "rgb(217, 210, 233)", "rgb(234, 209, 220)", 
                "rgb(221, 126, 107)", "rgb(234, 153, 153)", "rgb(249, 203, 156)", "rgb(255, 229, 153)", "rgb(182, 215, 168)", 
                "rgb(162, 196, 201)", "rgb(164, 194, 244)", "rgb(159, 197, 232)", "rgb(180, 167, 214)", "rgb(213, 166, 189)", 
                "rgb(204, 65, 37)", "rgb(224, 102, 102)", "rgb(246, 178, 107)", "rgb(255, 217, 102)", "rgb(147, 196, 125)", 
                "rgb(118, 165, 175)", "rgb(109, 158, 235)", "rgb(111, 168, 220)", "rgb(142, 124, 195)", "rgb(194, 123, 160)",
                "rgb(166, 28, 0)", "rgb(204, 0, 0)", "rgb(230, 145, 56)", "rgb(241, 194, 50)", "rgb(106, 168, 79)",
                "rgb(69, 129, 142)", "rgb(60, 120, 216)", "rgb(61, 133, 198)", "rgb(103, 78, 167)", "rgb(166, 77, 121)",
                "rgb(91, 15, 0)", "rgb(102, 0, 0)", "rgb(120, 63, 4)", "rgb(127, 96, 0)", "rgb(39, 78, 19)", 
                "rgb(12, 52, 61)", "rgb(28, 69, 135)", "rgb(7, 55, 99)", "rgb(32, 18, 77)", "rgb(76, 17, 48)"]
            ]
        });
    </script>

    <script>
      $('#edgeColorPicker').spectrum({
            color: "#000000",
            showInput: true,
            className: "full-spectrum",
            showInitial: true,
            showPalette: true,
            showSelectionPalette: true,
            maxSelectionSize: 10,
            preferredFormat: "hex",
            localStorageKey: "spectrum.demo",
            move: function (color) {
              //nodeColor = color.toHexString();
              $('#lineColorCode').text(color.toHexString());
              $('#lineColorBoard').css('color', color.toHexString());
              $('#lineColorBoard').css('background-color', color.toHexString())
              cy.$('edge:selected').style('line-color', color.toHexString());
                
            },
            show: function (color) {
            },
            beforeShow: function () {
            
            },
            hide: function () {
            
            },
            change: function(color) {
            },
            palette: [
                ["rgb(0, 0, 0)", "rgb(67, 67, 67)", "rgb(102, 102, 102)",
                "rgb(204, 204, 204)", "rgb(217, 217, 217)","rgb(255, 255, 255)"],
                ["rgb(152, 0, 0)", "rgb(255, 0, 0)", "rgb(255, 153, 0)", "rgb(255, 255, 0)", "rgb(0, 255, 0)",
                "rgb(0, 255, 255)", "rgb(74, 134, 232)", "rgb(0, 0, 255)", "rgb(153, 0, 255)", "rgb(255, 0, 255)"], 
                ["rgb(230, 184, 175)", "rgb(244, 204, 204)", "rgb(252, 229, 205)", "rgb(255, 242, 204)", "rgb(217, 234, 211)", 
                "rgb(208, 224, 227)", "rgb(201, 218, 248)", "rgb(207, 226, 243)", "rgb(217, 210, 233)", "rgb(234, 209, 220)", 
                "rgb(221, 126, 107)", "rgb(234, 153, 153)", "rgb(249, 203, 156)", "rgb(255, 229, 153)", "rgb(182, 215, 168)", 
                "rgb(162, 196, 201)", "rgb(164, 194, 244)", "rgb(159, 197, 232)", "rgb(180, 167, 214)", "rgb(213, 166, 189)", 
                "rgb(204, 65, 37)", "rgb(224, 102, 102)", "rgb(246, 178, 107)", "rgb(255, 217, 102)", "rgb(147, 196, 125)", 
                "rgb(118, 165, 175)", "rgb(109, 158, 235)", "rgb(111, 168, 220)", "rgb(142, 124, 195)", "rgb(194, 123, 160)",
                "rgb(166, 28, 0)", "rgb(204, 0, 0)", "rgb(230, 145, 56)", "rgb(241, 194, 50)", "rgb(106, 168, 79)",
                "rgb(69, 129, 142)", "rgb(60, 120, 216)", "rgb(61, 133, 198)", "rgb(103, 78, 167)", "rgb(166, 77, 121)",
                "rgb(91, 15, 0)", "rgb(102, 0, 0)", "rgb(120, 63, 4)", "rgb(127, 96, 0)", "rgb(39, 78, 19)", 
                "rgb(12, 52, 61)", "rgb(28, 69, 135)", "rgb(7, 55, 99)", "rgb(32, 18, 77)", "rgb(76, 17, 48)"]
            ]
        });
    </script>
    <script>
      $(function() {
        var bgcolor = "background-color:"+"\'" + nodeColor +"\'";
        $('#colorBoard').css("background-color", nodeColor);
        $('#colorBoard').css("color", nodeColor);
        $('#colorCode').css("text", nodeColor);
      })
    </script>
    <script>
      $("#Shape li a").click(function() {
        var imgPath = "\'img/"+ $(this).attr('value') + ".png\'";
        var shape = $(this).attr('value');
        var path = "/static/img/" +  shape + '.png'
        $("#imgShape").attr("src", path);
        $("#imgShape").css('text-align', 'right');
        $('#shapeText').text(shape);
        cy.$('node:selected').style('shape', shape);
      });
    </script>
    <script>
      $("#lineStyle li a").click(function () {
        var imgPath = "\'img/"+ $(this).attr('value') + ".png\'";
        var lineStyle  = $(this).attr('value');
        var path = "/static/img/" + lineStyle + '.png'
        $('#imgLine').attr('src', path);
        $('#imgLine').css('text-align', 'right');
        $('#lineText').text(lineStyle);
        cy.$('edge:selected').style('line-style', lineStyle);
     });
    </script>
    <script type="text/javascript">
      $('#source-shape').change(function(){
        var shape = $('#source-shape').val();
        cy.$('edge:selected').style('source-arrow-shape', shape);
      });
    </script>
    <script type="text/javascript">
      $('#target-shape').change(function(){
        var shape = $('#target-shape').val();
        cy.$('edge:selected').style('target-arrow-shape', shape);
      });
    </script>
    <script>
    $('#ex1').slider()
      .on('slide', function(ev){
       cy.$('node:selected').style('height', ev.value);
       cy.$('node:selected').style('width', ev.value);
      });
    </script>
    <script>
      $('#ex2').slider()
      .on('slide', function(ev){
        cy.$('edge:selected').style('width', ev.value);
      });
    </script>
    <script>
      $('#ex3').slider()
      .on('slide', function(ev){
        var nodeId = cy.$('node:selected').id();
        if(typeof(nodeId) != 'undefined') {
          hidePathNode(cy, nodeId, ev.value);
        }
      });
    </script>
    <script type="text/javascript">
      $('#btn-analysis').click(function() {
        $('#exampleModal').modal();
      });
    </script>
    <script type="text/javascript">
      $('#btn-screen-full').click(function() {
        event.preventDefault();
      $('#modal').iziModal('open');
      $('.cy-panzoom').hide();
      var cy2 = cytoscape({
        container: document.getElementById('cy2'), 
        boxSelectionEnabled: true,
        //autounselectify: true,
        layout: {
            name: 'spread',
            minDist: 40
          },  
          style: [
            {
              selector: 'node',
              style: {
                'content': 'data(id)',
                'font-size': 8,
                'background-color': '#96d9f6',//#96d9f6
                'size': 20
              }
            },
            {
              selector: "edge",
              style: {
                'curve-style': 'haystack',
                'haystack-radius': 0,
                'width': 4,
                'opacity': 0.5,
                'line-color': '#2dc16c'
              }
            },
            {
              selector: ':selected',
              style: {
                'background-color': 'black',
                'line-color': 'black',
                'target-arrow-color': 'black',
                'source-arrow-color': 'black',
                'opacity': 3
              }
            }
          ], 
          elements: net,        
        });//cy

        cy2.panzoom({}); 

        cy2.on('mouseover', 'node', function(event) {
          var node = event.cyTarget;
          nodeIndex = '<p>%s</p>'.format(node.id());
          //nodeIndex = "<table>"+"<th>hello</th>"+"</table>";
          node.qtip({
            content: nodeIndex,
            
            show: {
              event: event.type,
              ready: true
            },

            hide: {
              event: 'mouseout unfocus'
            },

            style: {
              classes: 'qtip-bootstrap',
              tip: {
                width: 16,
                height: 8
              }
            }

          }, event);
        });
      });
    </script>
    <script type="text/javascript">
      function getEdge(source, target) {
        for (var item in net) {
          if(net[item]['data']['source'] == source && net[item]['data']['target'] == target) {
            return net[item]['data'];
          }
        }
        return null;
      }
    </script>
    <script type="text/javascript">
      function formatManuscripts(refs) {
        var manuscripts = refs.toString();
        var format = manuscripts.replace('|', ';');
        var word = format.split(';');
        return word;
      }
    </script>
    <script type="text/javascript">
      function getManuscriptsDatabase(ref) {
        if(ref.indexOf('imex')!=-1)
          return 'mex';
        return 'pubmed';
      }
    </script>
    <script type="text/javascript">
      function setUpEdgeTable(edgeInfo) {
        var manuscripts = edgeInfo['Manuscripts'];
        var typeColor = new Object();
        var manuscriptsList = formatManuscripts(manuscripts);

        $('#edgeTypeLabel').text(edgeInfo['type']);
        $('#PathwayName').text(edgeInfo['PathName']);
        $('#Effect').text(edgeInfo['Effect']);
        $('#Manuscripts').empty();

        for (var index in manuscriptsList){
          var manuscript = manuscriptsList[index];
          var dbname = getManuscriptsDatabase(manuscript);
          if(dbname == 'pubmed') {
            $('#Manuscripts').append("<span class='label label-info pubmed '><a href='https://www.ncbi.nlm.nih.gov/pubmed/?term=%s' >Pubmed:%s</a></span>".format(manuscript, manuscript)); 
          } else {
            $('#Manuscripts').append("<span class='label label-info mex'><a href='https://www.ncbi.nlm.nih.gov/pubmed/?term=%s' >%s</a></span>".format(manuscript, manuscript)); 
          }
         }
        
        {% for edge_name in edge_types %}
          var edge_name = "{{ edge_name }}";
          var edge_color = "{{ edge_types[edge_name] }}";
          typeColor[edge_name] = edge_color;
        {% end %}

        $('#edgeTypeLabel').css('background-color', typeColor[edgeInfo['type']]);
      }
    </script>
    <script type="text/javascript">
      function setUpAnalysisTable(nodeId) {
        var keyword = '#' + nodeId;
        var degree = cy.filter("node[id='%s']".format(nodeId)).degree();
        var bc = cy.$().bc().betweenness(keyword);
        var cc = cy.$().cc({ root: keyword });
        var dc = cy.$().dc({ root: keyword }).degree;
        $('#degree').text(degree);
        $('#node_bc').text(bc);
        $('#node_cc').text(cc);
        $('#node_dc').text(dc);
      }
    </script>

    <script type="text/javascript">
      function firstNodeClick() {
        $('#Detail-table').show();
        $('#Detail-tips').hide();
        $('#arrow').hide();
        $('#help-text').hide();
        $('#interactTable').hide();
      }
    </script>
    <script type="text/javascript">
    function plotbar(title, xname, xlabel,  data, containerId) {
      var vContainer = echarts.init(document.getElementById(containerId));
      var option = {
          title: {
            text: title
          },
          color: ['#3398DB'],
          tooltip : {
              trigger: 'axis',
              axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                  type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
              }
          },
          toolbox: {
            show: true,  
                    //启用功能，目前支持feature，工具箱自定义功能回调处理  
            feature: {  
                        //辅助线标志  
              mark: {show: true},  
                        //dataZoom，框选区域缩放，自动与存在的dataZoom控件同步，
                  //数据视图，打开数据视图，可设置更多属性,readOnly 默认数据视图为只读(即值为true)，可指定readOnly为false打开编辑功能 
                  restore: {show: true},  
                  //saveAsImage，保存图片（IE8-不支持）,图片类型默认为'png'  
                  saveAsImage: {show: true}  
            }  
          },
          grid: {
              left: '3%',
              right: '10%',
              bottom: '3%',
              containLabel: true
          },
          xAxis : [
              {
                  name : xname,
                  data : xlabel,
                  axisTick: {
                      alignWithLabel: true
                  }
              }
          ],
          yAxis : [
              {
                  type : 'value',
                  name : 'number'
              }
          ],
          series : [
              {
                  type:'bar',
                  barWidth: '60%',
                  data: data
              }
          ]
      };
      vContainer.setOption(option);
    }
  </script>
  <script type="text/javascript">
    function getDegreeDistribute(CytoscapeObject) {
      var degreeDis = new Object();
      var nodes = CytoscapeObject.filter('node');

      for(var i = 0; i < nodes.length ; i++){
        var degree = nodes[i].degree();
        if(degree in degreeDis) {
          degreeDis[degree] += 1;
        } else {
          degreeDis[degree] = 1
        }
      }
      return degreeDis;
    }
  </script>
  <script type="text/javascript">
    function plotDistribute(degreeDis, name, title, xAxis) {
      if (typeof(degreeDis) == 'undefined') {
        return false;
      }
      var xlabel = [];
      var data = [];

      for(var index in degreeDis) {
        xlabel.push(index);
        data.push(degreeDis[index]);
      }

      plotbar(title, xAxis, xlabel, data, name);
    }
  </script>
  <script type="text/javascript">
    function getPathDistribute(CytoscapeObject) {
      var pathdist = new Object();
      var algorithm = CytoscapeObject.elements().floydWarshall();
      var nodes = CytoscapeObject.filter('node');
      
      for(var i = 0; i < nodes.length; i++) {
        var source = '#' + nodes[i].id();
        for(var j = 0; j < nodes.length; j++){
          var target = '#' + nodes[j].id();
          var distance = algorithm.distance(source, target);

          if(distance in pathdist) {
            pathdist[distance] += 1;
          } else {
            pathdist[distance] = 1
          }
        }
      }
      return pathdist;
    }
  </script>
  <script type="text/javascript">
    function setUpSummaryInit(cy) {
      var nodes = cy.filter("node");
      var edges = cy.filter("edge");

      var nodeTotal = nodes.length;
      var edgeTotal = edges.length;

      var totalDegree = nodes.totalDegree();
      var inoutDegree = getTotalInOutDegree(nodes);
      setUpSummary(nodes.length, edges.length, totalDegree, inoutDegree['totalInDegree'], inoutDegree['totalOutDegree']);
      
      return true;
    }
  </script>
  <script type="text/javascript">
    function setUpSummary(totalNodes, totalEdges, totalDegree, totalDegreeIn, totalDegreeOut) {
      $('#totalNodes').text(totalNodes);
      $('#totalEdges').text(totalEdges);
      $('#totalDegree').text(totalDegree);
      $('#totalDegreeIn').text(totalDegreeIn);
      $('#totalDegreeOut').text(totalDegreeOut);
      return true;
    }
  </script>
  <script type="text/javascript">
    function getPathInfo(CytoscapeObject, nodeId) {
      var pathdist = new Object();
      var algorithm = CytoscapeObject.elements().floydWarshall();
      var nodes = CytoscapeObject.filter('node');
      var distance2id = {}  
      for(var i = 0; i < nodes.length; i++) {
        var source = '#' + nodeId;
        var target = '#' + nodes[i].id();

        var distance = algorithm.distance(source, target);
        if (distance in distance2id) {
          distance2id[distance].push(target);
        } else {
           distance2id[distance] =  new Array();
        }
      }
      return distance2id;
    }
  </script>
  <script type="text/javascript">
    function hidePathNode(CytoscapeObject, nodeId, pathLength) {
      var distance2id = getPathInfo(CytoscapeObject, nodeId);
      var maxPathLength = 0;

      CytoscapeObject.nodes().hide();
      

      var fw = CytoscapeObject.elements().floydWarshall();

      if(pathLength == 0){
        CytoscapeObject.$('#'+nodeId).show();
      }

      for(var k= 1; k <= parseInt(pathLength); k++ ) {
        var hidedNode = distance2id[k];
        for(var i=0; i < hidedNode.length; i++) {
          var paths = fw.path('#'+nodeId, hidedNode[i]);
          paths.show();
        }
      }
    } 
  </script>
  <script type="text/javascript">
    function setUpNetworkStatistics(cy) {
      var nodes = cy.$('node:selected')
      var edges = cy.$('edge:selected')

      var nodeTotal = nodes.length;
      var edgeTotal = edges.length;

      var totalDegree = nodes.totalDegree();
      var inoutDegree = getTotalInOutDegree(nodes);
      setUpSummary(nodes.length, edges.length, totalDegree, inoutDegree['totalInDegree'], inoutDegree['totalOutDegree']);
    }
  </script>
  <script type="text/javascript">
    function updateCy() {
        cy.json({ elements: newEleJsons });
        var layout = cy.makeLayout({name : 'cose'});
        layout.run();
    }
  </script>